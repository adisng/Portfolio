<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Aditya Singh | Creative Developer</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- Three.js Core -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- Inflate/Deflate for FBX -->
    <script src="https://cdn.jsdelivr.net/npm/fflate@0.8.0/umd/index.min.js"></script>
    <!-- FBX Loader -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/FBXLoader.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://unpkg.com/@studio-freight/lenis@1.0.42/dist/lenis.min.js"></script> 
    <link href="https://fonts.googleapis.com/css2?family=Antonio:wght@100..700&family=Space+Grotesk:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-color: #020204; 
            --accent-primary: #22d3ee; 
            --accent-secondary: #22d3ee; 
            --accent-rgb: 34, 211, 238;
            --accent-white: #ffffff;
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
        }

        html.lenis {
            height: auto;
        }

        .lenis.lenis-smooth {
            scroll-behavior: auto;
        }

        .lenis.lenis-smooth [data-lenis-prevent] {
            overscroll-behavior: contain;
        }

        .lenis.lenis-stopped {
            overflow: hidden;
        }

        .lenis.lenis-scrolling iframe {
            pointer-events: none;
        }

        body {
            background: var(--bg-color);
            color: var(--text-primary);
            font-family: 'Space Grotesk', sans-serif;
            overflow-x: hidden;
            cursor: none;
            -webkit-tap-highlight-color: transparent;
            transition: color 0.5s ease;
        }

        .text-accent { color: var(--accent-secondary); }
        .bg-accent { background-color: var(--accent-secondary); }
        .border-accent { border-color: var(--accent-secondary); }
        .shadow-accent { box-shadow: 0 0 20px rgba(var(--accent-rgb), 0.3); }

        #cursor-dot, #cursor-ring {
            position: fixed;
            top: 0;
            left: 0;
            transform: translate(-50%, -50%);
            pointer-events: none;
            z-index: 9999;
            border-radius: 50%;
            mix-blend-mode: difference; 
        }

        #cursor-dot {
            width: 8px;
            height: 8px;
            background: var(--accent-secondary);
            box-shadow: 0 0 15px var(--accent-secondary);
            transition: background 0.3s;
        }

        #cursor-ring {
            width: 50px;
            height: 50px;
            border: 1px solid rgba(255, 255, 255, 0.8);
            transition: width 0.15s ease-out, height 0.15s ease-out, background-color 0.15s, border-color 0.3s;
            will-change: width, height, transform; 
        }

        body.hovering #cursor-ring {
            width: 80px;
            height: 80px;
            background-color: rgba(255, 255, 255, 0.1);
            border-color: var(--accent-secondary);
            backdrop-filter: blur(2px);
        }

        body.hovering #cursor-dot {
            opacity: 0;
        }

        @media (hover: none) and (pointer: coarse) {
            #cursor-dot, #cursor-ring { display: none !important; }
            body { cursor: auto; }
            .magnetic { cursor: pointer; }
        }

        #webgl-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: -1;
            opacity: 1; 
            pointer-events: none;
        }

        h1, h2, h3, .font-tall {
            font-family: 'Antonio', sans-serif;
            text-transform: uppercase;
            letter-spacing: 0.02em; 
            line-height: 0.9;
        }

        .char-wrapper {
            display: inline-block;
            overflow: hidden;
            vertical-align: bottom;
            padding-bottom: 0.2em;
        }
        
        .char {
            display: inline-block;
            will-change: transform;
        }

        .text-outline {
            color: rgba(255, 255, 255, 0.2); 
            -webkit-text-stroke: 2px rgba(255, 255, 255, 1); 
            position: relative;
            display: inline-block;
        }

        @media (max-width: 768px) {
            .text-outline {
                -webkit-text-stroke: 1px rgba(255, 255, 255, 1);
            }
        }

        .gradient-accent {
            color: var(--accent-secondary);
            text-shadow: 0 0 30px rgba(var(--accent-rgb), 0.5);
            transition: color 0.5s;
        }

        .glass-panel {
            background: rgba(16, 16, 24, 0.7);
            backdrop-filter: blur(8px); 
            -webkit-backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 20px;
            transition: transform 0.1s, border-color 0.3s, background 0.3s;
            transform-style: preserve-3d;
            perspective: 1000px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
            will-change: transform;
        }

        .glass-panel:hover {
            border-color: rgba(255, 255, 255, 0.3);
            box-shadow: 0 0 30px rgba(var(--accent-rgb), 0.1);
            background: rgba(16, 16, 24, 0.85);
        }

        .hover-border-accent:hover {
            border-color: rgba(var(--accent-rgb), 0.5);
        }

        .draggable-window {
            user-select: none;
            cursor: default;
            position: absolute; 
        }
        .draggable-handle {
            cursor: grab;
        }
        .draggable-handle:active {
            cursor: grabbing;
        }

        #ai-widget-btn {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 3.5rem;
            height: 3.5rem;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            z-index: 90;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
        }

        #ai-widget-btn:hover {
            transform: scale(1.1);
            border-color: var(--accent-secondary);
            box-shadow: 0 0 30px rgba(var(--accent-rgb), 0.3);
            background: rgba(var(--accent-rgb), 0.1);
        }

        #ai-chat-window {
            position: fixed;
            bottom: 7rem;
            right: 5vw;
            width: 90vw;
            max-width: 380px;
            height: 0;
            opacity: 0;
            overflow: hidden;
            background: rgba(10, 10, 15, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 24px;
            z-index: 90;
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            box-shadow: 0 20px 60px rgba(0,0,0,0.9);
            pointer-events: none;
        }

        @media (min-width: 768px) {
            #ai-chat-window {
                right: 2rem;
                width: 380px;
            }
        }

        #ai-chat-window.open {
            height: 550px;
            max-height: 75vh;
            opacity: 1;
            pointer-events: all;
        }

        .marquee-container {
            position: relative;
            width: 100%;
            overflow: hidden;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.02), transparent);
            border-top: 1px solid rgba(255,255,255,0.05);
            border-bottom: 1px solid rgba(255,255,255,0.05);
            padding: 1.5rem 0;
            margin-top: 4rem;
        }

        .marquee-content {
            display: flex;
            animation: scrolling 20s linear infinite;
            will-change: transform;
        }

        .marquee-item {
            font-family: 'Antonio', sans-serif;
            font-size: 2rem;
            font-weight: 500;
            color: rgba(255,255,255,0.2);
            white-space: nowrap;
            padding: 0 2rem;
            transition: color 0.3s;
        }

        @media (min-width: 768px) {
            .marquee-item { font-size: 3rem; padding: 0 3rem; }
        }

        .marquee-container:hover .marquee-item {
            color: var(--accent-secondary);
            text-shadow: 0 0 10px var(--accent-secondary);
            opacity: 1;
        }

        @keyframes scrolling {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }

        .nav-link {
            position: relative;
            font-size: 0.9rem;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            color: var(--text-secondary);
            transition: color 0.3s;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--accent-secondary), var(--accent-white));
            transition: width 0.3s ease;
        }

        .nav-link:hover { color: white; }
        .nav-link:hover::after { width: 100%; }

        #mobile-menu {
            transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .grain-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1; 
            opacity: 0.05;
            background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyBAMAAADsEZWCAAAAGFBMVEUAAAA5OTkAAABMTExERERmZmYzMzMyMjJ4F4O1AAAACHRSTlMAMwA5MzMzM3PF3C0AAABcSURBVDjLY2AYBaNgOANGPBh4QDz4wQc+8IEDfOADHzjABz7wgQ984AMf+MAHPvCBD3zgAx/4wAc+8IEPAG6sH/Hl/nZ1AAAAAElFTkSuQmCC");
            background-size: 100px;
        }
        
        .vignette {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 2; 
            background: radial-gradient(circle at center, transparent 0%, #020204 130%);
        }

        .project-image-placeholder {
            background-size: cover;
            background-position: center;
            transition: transform 0.7s cubic-bezier(0.2, 0.8, 0.2, 1);
        }
        .project-card:hover .project-image-placeholder {
            transform: scale(1.1);
        }
    </style>
</head>
<body class="selection:bg-red-500/30 selection:text-white">

    <div class="grain-overlay"></div>
    <div class="vignette"></div>

    <div id="cursor-dot"></div>
    <div id="cursor-ring"></div>

    <div id="webgl-container"></div>

    <div id="mobile-menu" class="fixed inset-0 bg-[#020204]/98 backdrop-blur-xl z-50 transform translate-x-full flex flex-col justify-center items-center gap-8 text-center">
        <div class="absolute top-6 right-6 p-2" onclick="toggleMobileMenu()">
            <i data-lucide="x" class="w-8 h-8 text-white cursor-pointer"></i>
        </div>
        <a href="#about" class="text-5xl font-tall text-white/80 hover:text-accent transition-colors" onclick="toggleMobileMenu()">About</a>
        <a href="#experience" class="text-5xl font-tall text-white/80 hover:text-accent transition-colors" onclick="toggleMobileMenu()">Experience</a>
        <a href="#education" class="text-5xl font-tall text-white/80 hover:text-accent transition-colors" onclick="toggleMobileMenu()">Education</a>
        
        <!-- Mobile Controls for New Features -->
        <div class="flex gap-6 mt-4">
            <button onclick="cycleTheme()" class="p-4 rounded-full bg-white/5 border border-white/10 text-gray-300 hover:text-accent hover:border-accent transition-all active:scale-95" title="Switch Theme">
                <i data-lucide="sparkles" class="w-6 h-6"></i>
            </button>
            
            <button onclick="toggleMobileMenu(); toggleArchitect()" class="p-4 rounded-full bg-white/5 border border-white/10 text-gray-300 hover:text-accent hover:border-accent transition-all active:scale-95" title="AI Architect">
                <i data-lucide="cpu" class="w-6 h-6"></i>
            </button>

            <button onclick="toggleMobileMenu(); releaseTheCat()" class="p-4 rounded-full bg-white/5 border border-white/10 text-gray-300 hover:text-pink-400 hover:border-pink-400 transition-all active:scale-95" title="Party Mode">
                <i data-lucide="cat" class="w-6 h-6"></i>
            </button>
        </div>

        <div class="w-24 h-[1px] bg-white/10 my-4"></div>
        <a href="mailto:www.adisng@gmail.com" class="text-base font-mono text-accent hover:text-white">www.adisng@gmail.com</a>
    </div>

    <header class="fixed top-0 w-full z-40 px-6 py-4 transition-all duration-300 bg-gradient-to-b from-[#020204] via-[#020204]/80 to-transparent">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <a href="#" class="magnetic z-50 group">
                <div class="font-bold text-2xl tracking-widest relative flex items-center gap-1 font-tall">
                    ADITYA<span class="text-accent animate-pulse">.</span>
                </div>
            </a>

            <nav class="hidden md:flex gap-12 items-center">
                <a href="#about" class="magnetic nav-link">About</a>
                <a href="#experience" class="magnetic nav-link">Experience</a>
                <a href="#education" class="magnetic nav-link">Education</a>
                
                <div class="h-6 w-px bg-white/20 mx-2"></div>
                
                <button onclick="cycleTheme()" class="magnetic relative w-11 h-11 flex items-center justify-center rounded-full bg-white/5 border border-white/10 transition-all duration-500 hover:scale-110 hover:shadow-[0_0_25px_rgba(var(--accent-rgb),0.4)] hover:border-white/30 group overflow-hidden" title="Change Theme">
                    <div class="absolute inset-0 bg-gradient-to-tr from-transparent via-white/5 to-white/20 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                    <i data-lucide="sparkles" class="w-5 h-5 text-gray-400 group-hover:text-white transition-colors relative z-10 transform group-hover:rotate-12 duration-500"></i>
                </button>

                <button onclick="releaseTheCat()" class="magnetic relative w-11 h-11 flex items-center justify-center rounded-full bg-white/5 border border-white/10 transition-all duration-500 hover:scale-110 hover:shadow-[0_0_25px_#ec4899] hover:border-pink-500/30 group overflow-hidden" title="Party Mode">
                    <div class="absolute inset-0 bg-gradient-to-tr from-transparent via-pink-500/10 to-purple-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                    <i data-lucide="cat" class="w-5 h-5 text-gray-400 group-hover:text-pink-400 transition-colors relative z-10"></i>
                </button>
            </nav>

            <div class="flex items-center gap-4">
                <a href="mailto:www.adisng@gmail.com" class="magnetic hidden md:block">
                    <div class="px-6 py-2 border border-white/20 bg-white/5 rounded-full hover:bg-accent hover:text-black hover:border-accent hover:shadow-accent transition-all duration-300 text-xs tracking-widest uppercase font-bold text-white">
                        Contact
                    </div>
                </a>
                <button class="md:hidden text-white p-2" onclick="toggleMobileMenu()">
                    <i data-lucide="menu" class="w-8 h-8"></i>
                </button>
            </div>
        </div>
    </header>

    <section id="about" class="relative min-h-screen flex items-center justify-center px-6 pt-0 overflow-hidden">
        <div class="relative z-20 max-w-7xl mx-auto w-full grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
            <div class="order-2 lg:order-1 relative">
                <div class="mb-8 inline-flex items-center gap-3 px-4 py-2 border border-white/10 rounded-full bg-white/5 backdrop-blur-md max-w-full hover:border-accent transition-colors shadow-lg">
                    <span class="relative flex h-2 w-2 flex-shrink-0">
                      <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-accent opacity-75"></span>
                      <span class="relative inline-flex rounded-full h-2 w-2 bg-accent"></span>
                    </span>
                    <span class="text-[10px] md:text-xs font-mono tracking-widest uppercase text-gray-300 truncate font-semibold">
                        Mission: AWS Cloud Practitioner
                    </span>
                </div>
                
                <h1 class="text-7xl sm:text-8xl md:text-[10rem] font-bold leading-none mb-10 text-white cursor-default drop-shadow-2xl font-tall relative z-20 flex flex-col justify-center">
                    <div class="overflow-hidden pb-2">
                        <span class="text-outline block reveal-text" style="line-height: 0.9;">ADITYA</span>
                    </div>
                    <div class="overflow-hidden flex items-center gap-4 pb-2">
                        <span class="gradient-accent block reveal-text" style="line-height: 0.9;">SINGH</span>
                        <span class="text-2xl md:text-5xl text-accent font-mono opacity-60 font-normal">&lt;/&gt;</span>
                    </div>
                </h1>
                
                <div class="relative max-w-lg mb-12">
                    <p class="text-gray-200 text-lg md:text-xl leading-relaxed font-light border-l-2 border-accent pl-6 drop-shadow-md">
                        Aditya Singh. I craft immersive digital experiences at the intersection of <span class="text-accent font-medium">Art</span> and <span class="text-white font-medium">Engineering</span>.
                    </p>
                </div>

                <div class="flex flex-wrap gap-6 items-center">
                    <a href="#experience" class="magnetic px-10 py-4 bg-white text-black rounded-full text-sm font-bold tracking-widest hover:scale-105 hover:shadow-[0_0_30px_rgba(255,255,255,0.4)] transition-all duration-300">
                        EXPLORE EXPERIENCE
                    </a>
                    
                    <button onclick="toggleArchitect()" class="magnetic px-8 py-4 bg-white/5 border border-white/20 text-white rounded-full text-sm font-bold tracking-widest hover:bg-white/10 hover:border-accent transition-all duration-300 flex items-center gap-2 group">
                        <i data-lucide="cpu" class="w-4 h-4 text-accent group-hover:animate-spin"></i>
                        AI ARCHITECT
                    </button>

                    <div class="flex gap-4">
                        <a href="https://github.com/adisng" target="_blank" class="magnetic p-3 text-gray-400 hover:text-white transition-colors border border-white/20 rounded-full hover:bg-white/10 hover:border-white">
                            <i data-lucide="github" class="w-5 h-5"></i>
                        </a>
                        <a href="https://linkedin.com/in/patialapapi03" target="_blank" class="magnetic p-3 text-gray-400 hover:text-white transition-colors border border-white/20 rounded-full hover:bg-white/10 hover:border-white">
                            <i data-lucide="linkedin" class="w-5 h-5"></i>
                        </a>
                    </div>
                </div>

            </div>
            
            <div class="order-1 lg:order-2 h-[300px] lg:h-full w-full relative flex items-center justify-center pointer-events-none">
                <div id="draggable-window" class="pointer-events-auto z-30 w-80 glass-panel rounded-xl overflow-hidden flex flex-col group interactive shadow-2xl draggable-window hidden md:flex" style="top: 20%; right: 10%;">
                    <div class="flex justify-between items-center p-3 bg-white/5 border-b border-white/5 draggable-handle" title="Drag me!">
                        <div class="flex gap-2">
                            <div class="w-3 h-3 rounded-full bg-red-500/80"></div>
                            <div class="w-3 h-3 rounded-full bg-yellow-500/80"></div>
                            <div class="w-3 h-3 rounded-full bg-green-500/80"></div>
                        </div>
                        <div class="font-mono text-xs text-gray-500 flex items-center gap-1">
                            <i data-lucide="terminal" class="w-3 h-3"></i>
                            main.py
                        </div>
                    </div>
                    
                    <div class="flex-1 p-4 font-mono text-xs md:text-sm text-gray-300 overflow-y-auto bg-[#0a0a10]/80">
                        <p><span class="text-indigo-400">class</span> <span class="text-accent">Developer</span>:</p>
                        <p class="pl-4">name = <span class="text-green-400">'Aditya Singh'</span></p>
                        <p class="pl-4">role = <span class="text-green-400">'Creative Technologist'</span></p>
                        <p class="pl-4">stack = [<span class="text-green-400">'AWS'</span>, <span class="text-green-400">'Python'</span>, <span class="text-green-400">'React'</span>]</p>
                        <br>
                        <p class="pl-4"><span class="text-indigo-400">def</span> <span class="text-yellow-400">deploy</span>(self):</p>
                        <p class="pl-8">return <span class="text-green-400">'Scalable Solutions'</span></p>
                        <p class="mt-2 animate-pulse text-accent">_</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="marquee-container">
        <div class="marquee-content">
            <span class="marquee-item">PYTHON</span>
            <span class="marquee-item text-accent">‚Ä¢</span>
            <span class="marquee-item">REACT.JS</span>
            <span class="marquee-item text-accent">‚Ä¢</span>
            <span class="marquee-item">AWS CLOUD</span>
            <span class="marquee-item text-accent">‚Ä¢</span>
            <span class="marquee-item">MACHINE LEARNING</span>
            <span class="marquee-item text-accent">‚Ä¢</span>
            <span class="marquee-item">BIG DATA</span>
            <span class="marquee-item text-accent">‚Ä¢</span>
            <span class="marquee-item">PYTHON</span>
            <span class="marquee-item text-accent">‚Ä¢</span>
            <span class="marquee-item">REACT.JS</span>
            <span class="marquee-item text-accent">‚Ä¢</span>
            <span class="marquee-item">AWS CLOUD</span>
            <span class="marquee-item text-accent">‚Ä¢</span>
            <span class="marquee-item">MACHINE LEARNING</span>
            <span class="marquee-item text-accent">‚Ä¢</span>
            <span class="marquee-item">BIG DATA</span>
            <span class="marquee-item text-accent">‚Ä¢</span>
        </div>
    </div>

    <section id="experience" class="py-24 md:py-40 px-6 relative">
        <div class="max-w-5xl mx-auto">
            <div class="flex items-end justify-between mb-16 md:mb-24">
                <h2 class="text-5xl md:text-8xl font-tall font-bold text-white tracking-tight drop-shadow-lg">Experience</h2>
                <div class="h-[1px] flex-1 bg-gradient-to-r from-white/20 to-transparent ml-8 mb-4"></div>
            </div>

            <div class="glass-panel p-8 md:p-12 group relative overflow-hidden magnetic-card hover-border-accent" onmousemove="handleTilt(event, this)" onmouseleave="resetTilt(this)">
                <div class="absolute top-0 right-0 w-96 h-96 bg-white/5 rounded-full blur-[100px] group-hover:bg-accent/10 transition-all duration-700"></div>
                
                <div class="relative z-10 flex flex-col md:flex-row gap-10 justify-between items-start">
                    <div class="flex-1">
                        <div class="flex flex-wrap items-center gap-4 mb-4">
                            <h3 class="text-3xl md:text-4xl font-tall font-bold text-white">Web Developer Intern</h3>
                            <span class="px-3 py-1 border border-accent bg-accent/10 text-accent text-xs uppercase font-bold tracking-widest rounded-full shadow-accent">Abstract</span>
                        </div>
                        <p class="text-gray-400 font-mono text-sm mb-8 flex items-center gap-2">
                            <i data-lucide="calendar" class="w-4 h-4"></i> Jan 2025 - Apr 2025
                        </p>
                        <p class="text-gray-200 leading-relaxed text-base md:text-lg">
                            Engineered high-performance web solutions using modern stacks. Optimized rendering cycles, reducing load times by <span class="text-white font-bold border-b border-accent">40%</span>. Collaborated in an agile environment to deploy scalable front-end architectures.
                        </p>
                    </div>
                    <div class="flex flex-row md:flex-col gap-3 justify-start">
                        <span class="px-4 py-2 bg-white/5 rounded-lg text-xs text-gray-300 border border-white/10 whitespace-nowrap hover:bg-white/10 hover:text-accent transition-colors shadow-sm">HTML5 / CSS3</span>
                        <span class="px-4 py-2 bg-white/5 rounded-lg text-xs text-gray-300 border border-white/10 whitespace-nowrap hover:bg-white/10 hover:text-accent transition-colors shadow-sm">JavaScript ES6+</span>
                        <span class="px-4 py-2 bg-white/5 rounded-lg text-xs text-gray-300 border border-white/10 whitespace-nowrap hover:bg-white/10 hover:text-accent transition-colors shadow-sm">Performance</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="education" class="py-24 md:py-40 px-6 relative">
        <div class="max-w-5xl mx-auto">
            <div class="flex items-end justify-between mb-16 md:mb-24">
                <h2 class="text-5xl md:text-8xl font-tall font-bold text-white tracking-tight drop-shadow-lg">Education</h2>
                <div class="h-[1px] flex-1 bg-gradient-to-r from-white/20 to-transparent ml-8 mb-4"></div>
            </div>

            <div class="grid grid-cols-1 gap-8">
                <div class="glass-panel p-8 md:p-12 group relative overflow-hidden magnetic-card hover-border-accent" onmousemove="handleTilt(event, this)" onmouseleave="resetTilt(this)">
                    <div class="absolute top-0 right-0 w-96 h-96 bg-white/5 rounded-full blur-[100px] group-hover:bg-accent/10 transition-all duration-700"></div>
                    
                    <div class="relative z-10 flex flex-col md:flex-row gap-8 justify-between items-center">
                        <div class="flex-1">
                            <h3 class="text-2xl md:text-3xl font-tall font-bold text-white mb-2">Master of Computer Applications (MCA)</h3>
                            <p class="text-accent font-mono text-sm mb-4">MATS University, Raipur</p>
                            <p class="text-gray-300 leading-relaxed max-w-xl">
                                Specializing in Computer Science and Advanced Computing.
                            </p>
                        </div>
                        <div class="px-4 py-2 border border-white/10 rounded-full bg-white/5 text-xs font-mono text-gray-300 whitespace-nowrap">
                            2025 - 2027
                        </div>
                    </div>
                </div>

                <div class="glass-panel p-8 md:p-12 group relative overflow-hidden magnetic-card hover-border-accent" onmousemove="handleTilt(event, this)" onmouseleave="resetTilt(this)">
                    <div class="absolute top-0 right-0 w-96 h-96 bg-white/5 rounded-full blur-[100px] group-hover:bg-accent/10 transition-all duration-700"></div>
                    
                    <div class="relative z-10 flex flex-col md:flex-row gap-8 justify-between items-center">
                        <div class="flex-1">
                            <h3 class="text-2xl md:text-3xl font-tall font-bold text-white mb-2">Bachelors in Computer Applications (BCA)</h3>
                            <p class="text-accent font-mono text-sm mb-4">St. Vincent Pallotti, Raipur</p>
                            <p class="text-gray-300 leading-relaxed max-w-xl">
                                Foundation in Computer Programming & Applications.
                            </p>
                        </div>
                        <div class="px-4 py-2 border border-white/10 rounded-full bg-white/5 text-xs font-mono text-gray-300 whitespace-nowrap">
                            Aug 2022 - Aug 2025
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="certifications" class="py-24 md:py-40 px-6 relative">
        <div class="max-w-6xl mx-auto">
            <div class="flex items-end justify-between mb-16 md:mb-24">
                <h2 class="text-5xl md:text-8xl font-tall font-bold text-white tracking-tight drop-shadow-lg">Certifications</h2>
                <div class="h-[1px] flex-1 bg-gradient-to-r from-white/20 to-transparent ml-8 mb-4"></div>
            </div>
            
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-8">
                <div class="glass-panel p-8 hover-border-accent transition-all group" onmousemove="handleTilt(event, this)" onmouseleave="resetTilt(this)">
                    <div class="flex justify-between items-start mb-6">
                        <div class="p-3 bg-white/5 rounded-lg border border-white/10 group-hover:border-accent group-hover:bg-accent/10 transition-colors">
                            <i data-lucide="cloud" class="w-8 h-8 text-white group-hover:text-accent group-hover:scale-110 transition-all"></i>
                        </div>
                        <span class="text-[10px] uppercase tracking-widest text-gray-400 border border-white/10 bg-white/5 px-2 py-1 rounded">Job Sim</span>
                    </div>
                    <h3 class="text-2xl md:text-3xl font-tall font-bold mb-3 group-hover:text-accent transition-colors text-white">AWS Solutions Architecture</h3>
                    <p class="text-gray-400 text-sm leading-relaxed">Designing scalable, reliable, and cost-efficient cloud systems.</p>
                </div>

                <div class="glass-panel p-8 hover-border-accent transition-all group" onmousemove="handleTilt(event, this)" onmouseleave="resetTilt(this)">
                    <div class="flex justify-between items-start mb-6">
                        <div class="p-3 bg-white/5 rounded-lg border border-white/10 group-hover:border-accent group-hover:bg-accent/10 transition-colors">
                            <i data-lucide="database" class="w-8 h-8 text-white group-hover:text-accent group-hover:scale-110 transition-all"></i>
                        </div>
                        <span class="text-[10px] uppercase tracking-widest text-gray-400 border border-white/10 bg-white/5 px-2 py-1 rounded">Level 1</span>
                    </div>
                    <h3 class="text-2xl md:text-3xl font-tall font-bold mb-3 group-hover:text-accent transition-colors text-white">Big Data Foundations</h3>
                    <p class="text-gray-400 text-sm leading-relaxed">Mastering core concepts of massive data handling and processing pipelines.</p>
                </div>

                <div class="glass-panel p-8 hover-border-accent transition-all group" onmousemove="handleTilt(event, this)" onmouseleave="resetTilt(this)">
                    <div class="flex justify-between items-start mb-6">
                        <div class="p-3 bg-white/5 rounded-lg border border-white/10 group-hover:border-accent group-hover:bg-accent/10 transition-colors">
                            <i data-lucide="brain" class="w-8 h-8 text-white group-hover:text-accent group-hover:scale-110 transition-all"></i>
                        </div>
                        <span class="text-[10px] uppercase tracking-widest text-gray-400 border border-white/10 bg-white/5 px-2 py-1 rounded">Fundamentals</span>
                    </div>
                    <h3 class="text-2xl md:text-3xl font-tall font-bold mb-3 group-hover:text-accent transition-colors text-white">Machine Learning & AI</h3>
                    <p class="text-gray-400 text-sm leading-relaxed">Implementing intelligent algorithms and AI strategies.</p>
                </div>

                <div class="glass-panel p-8 hover-border-accent transition-all group" onmousemove="handleTilt(event, this)" onmouseleave="resetTilt(this)">
                    <div class="flex justify-between items-start mb-6">
                        <div class="p-3 bg-white/5 rounded-lg border border-white/10 group-hover:border-accent group-hover:bg-accent/10 transition-colors">
                            <i data-lucide="code" class="w-8 h-8 text-white group-hover:text-accent group-hover:scale-110 transition-all"></i>
                        </div>
                        <span class="text-[10px] uppercase tracking-widest text-gray-400 border border-white/10 bg-white/5 px-2 py-1 rounded">Job Sim</span>
                    </div>
                    <h3 class="text-2xl md:text-3xl font-tall font-bold mb-3 group-hover:text-accent transition-colors text-white">Datacom Software Dev</h3>
                    <p class="text-gray-400 text-sm leading-relaxed">Practical simulation of real-world software development scenarios.</p>
                </div>
            </div>
        </div>
    </section>

    <footer class="py-24 md:py-40 px-6 border-t border-white/5 relative overflow-hidden bg-black/20">
        <div class="max-w-7xl mx-auto text-center relative z-10">
            <h2 class="text-5xl md:text-[10rem] font-tall font-bold mb-16 text-white/5 hover:text-white/20 transition-colors cursor-default leading-none whitespace-nowrap">
                ADITYA SINGH
            </h2>
            
            <div class="flex flex-wrap justify-center gap-8 mb-16">
                <a href="mailto:www.adisng@gmail.com" class="magnetic text-sm uppercase tracking-widest text-gray-400 hover:text-accent transition-colors flex items-center gap-2">
                    <i data-lucide="mail" class="w-4 h-4"></i> Email
                </a>
                <a href="https://linkedin.com/in/patialapapi03" target="_blank" class="magnetic text-sm uppercase tracking-widest text-gray-400 hover:text-accent transition-colors flex items-center gap-2">
                    <i data-lucide="linkedin" class="w-4 h-4"></i> LinkedIn
                </a>
                <a href="https://github.com/adisng" target="_blank" class="magnetic text-sm uppercase tracking-widest text-gray-400 hover:text-accent transition-colors flex items-center gap-2">
                    <i data-lucide="github" class="w-4 h-4"></i> GitHub
                </a>
            </div>
            
            <div class="text-[10px] font-mono text-gray-700 flex justify-between items-center border-t border-white/5 pt-8">
                <span>¬© 2025 ALL RIGHTS RESERVED</span>
                <span>RAIPUR, INDIA</span>
            </div>
        </div>
    </footer>

    <div id="ai-widget-btn" class="magnetic" title="Chat with Joji">
        <i data-lucide="dog" class="w-8 h-8 text-accent"></i>
        <div class="absolute inset-0 rounded-full border border-accent/50 animate-ping"></div>
    </div>

    <div id="ai-chat-window">
        <div class="p-5 border-b border-white/10 flex justify-between items-center bg-black/40">
            <div class="text-xs font-mono font-bold text-accent flex items-center gap-2">
                <i data-lucide="dog" class="w-4 h-4"></i>
                JOJI (AI DOG)
            </div>
            <i data-lucide="x" class="w-5 h-5 text-gray-500 hover:text-white cursor-pointer transition-colors" id="close-chat"></i>
        </div>
        
        <div class="h-[400px] overflow-y-auto p-5 flex flex-col gap-4" id="chat-messages">
            <div class="self-start bg-white/5 p-4 rounded-2xl rounded-tl-none border border-white/5 max-w-[85%] shadow-lg">
                <p class="text-xs text-gray-300 leading-relaxed font-light">
                    Woof! I'm Joji, Aditya's digital dog üêï. I can help you navigate this site or even change the colors for you. Just ask me to "switch to cyan"!
                </p>
            </div>
        </div>

        <div class="p-4 bg-black/80 border-t border-white/10 absolute bottom-0 w-full backdrop-blur-md">
            <div class="relative">
                <input type="text" id="ai-input" class="w-full bg-white/5 border border-white/10 rounded-xl py-3 px-4 text-xs text-white placeholder-gray-500 outline-none focus:border-accent/50 focus:bg-white/10 transition-all font-mono" placeholder="Type here..." autocomplete="off">
                <button id="send-btn" class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-accent transition-colors">
                    <i data-lucide="send" class="w-4 h-4"></i>
                </button>
            </div>
        </div>
    </div>

    <div id="architect-modal" class="fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-md opacity-0 pointer-events-none transition-opacity duration-300">
        <div class="glass-panel w-full max-w-2xl mx-4 relative transform scale-95 transition-transform duration-300 p-0 overflow-hidden" id="architect-content">
            <div class="p-6 border-b border-white/10 flex justify-between items-center bg-gradient-to-r from-accent/10 to-transparent">
                <div class="flex items-center gap-3">
                    <div class="p-2 bg-accent/20 rounded-lg">
                        <i data-lucide="cpu" class="w-6 h-6 text-accent"></i>
                    </div>
                    <div>
                        <h3 class="text-xl font-tall font-bold text-white">Project Architect</h3>
                        <p class="text-xs font-mono text-gray-400 uppercase tracking-wider">Powered by Gemini 2.5</p>
                    </div>
                </div>
                <button onclick="toggleArchitect()" class="p-2 hover:bg-white/10 rounded-full transition-colors">
                    <i data-lucide="x" class="w-6 h-6 text-gray-400 hover:text-white"></i>
                </button>
            </div>

            <div class="p-8 max-h-[70vh] overflow-y-auto">
                <div id="architect-input-section" class="space-y-6">
                    <p class="text-gray-300 text-sm leading-relaxed">
                        Have an idea? Describe it below. I'll analyze it and generate a 
                        <span class="text-accent font-bold">Tech Stack</span>, 
                        <span class="text-accent font-bold">Project Name</span>, and 
                        <span class="text-accent font-bold">Execution Plan</span> tailored to modern standards.
                    </p>
                    <textarea id="project-idea" rows="4" class="w-full bg-black/40 border border-white/10 rounded-xl p-4 text-white placeholder-gray-600 focus:border-accent focus:ring-1 focus:ring-accent outline-none transition-all resize-none font-mono text-sm" placeholder="e.g. A real-time dashboard for tracking satellite debris using WebGL..."></textarea>
                    
                    <button onclick="generateProjectPlan()" id="generate-btn" class="w-full py-4 bg-white text-black font-bold tracking-widest rounded-xl hover:bg-accent hover:text-white hover:scale-[1.02] active:scale-[0.98] transition-all duration-300 flex justify-center items-center gap-2">
                        <span>INITIATE ANALYSIS</span>
                        <i data-lucide="zap" class="w-4 h-4 fill-current"></i>
                    </button>
                </div>

                <div id="architect-loading" class="hidden py-12 flex flex-col items-center justify-center space-y-4">
                    <div class="w-12 h-12 border-4 border-white/10 border-t-accent rounded-full animate-spin"></div>
                    <p class="font-mono text-xs text-accent animate-pulse">Computing optimum architecture...</p>
                </div>

                <div id="architect-result" class="hidden space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500">
                </div>
            </div>
        </div>
    </div>

    <!-- Disco Overlay -->
    <div id="disco-overlay" class="fixed inset-0 z-[200] pointer-events-none opacity-0 transition-opacity duration-500 flex items-center justify-center hidden">
        <!-- 3D Cat Container -->
        <div id="disco-cat-container" class="relative w-64 h-64 md:w-96 md:h-96 rounded-full border-8 border-white/20 shadow-[0_0_100px_rgba(255,255,255,0.5)] bg-black/30 backdrop-blur-sm overflow-hidden">
            <!-- Canvas will be injected here by JS -->
        </div>
    </div>

    <script>
        const apiKey = "AIzaSyBXlBbo0ZpBJPVcqc1G4Ep55utEMjPNN18"; 

        lucide.createIcons();

        const state = {
            r: 0.13, g: 0.82, b: 0.93
        };

        const themes = {
            'cyan': { hex: '#22d3ee', rgb: '34, 211, 238' },     
            'purple': { hex: '#c084fc', rgb: '192, 132, 252' },  
            'green': { hex: '#4ade80', rgb: '74, 222, 128' },    
            'orange': { hex: '#fb923c', rgb: '251, 146, 60' },   
            'rose': { hex: '#fb7185', rgb: '251, 113, 133' }     
        };
        
        let currentThemeIndex = 0;
        const themeKeys = Object.keys(themes);

        let currentProjectData = null;

        window.setTheme = function(hex, rgb) {
            const root = document.documentElement;
            root.style.setProperty('--accent-secondary', hex);
            root.style.setProperty('--accent-rgb', rgb);

            const r = parseInt(hex.slice(1, 3), 16) / 255;
            const g = parseInt(hex.slice(3, 5), 16) / 255;
            const b = parseInt(hex.slice(5, 7), 16) / 255;
            
            gsap.to(state, {
                r: r, g: g, b: b,
                duration: 1,
                ease: "power2.out"
            });
        }
        
        function cycleTheme() {
            currentThemeIndex = (currentThemeIndex + 1) % themeKeys.length;
            const key = themeKeys[currentThemeIndex];
            const theme = themes[key];
            window.setTheme(theme.hex, theme.rgb);
            
            const btn = document.querySelector('button[onclick="cycleTheme()"] i');
            gsap.fromTo(btn, {rotate: 0}, {rotate: 360, duration: 0.5});
        }

        const lenis = new Lenis({
            duration: 1.2,
            easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),
            direction: 'vertical',
            gestureDirection: 'vertical',
            smooth: true,
            mouseMultiplier: 1,
            smoothTouch: false,
            touchMultiplier: 2,
        });

        function raf(time) {
            lenis.raf(time);
            requestAnimationFrame(raf);
        }
        requestAnimationFrame(raf);

        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('translate-x-full');
        }

        document.addEventListener('DOMContentLoaded', () => {
            const revealTexts = document.querySelectorAll('.reveal-text');
            
            revealTexts.forEach(text => {
                const chars = text.textContent.split('');
                text.innerHTML = '';
                
                chars.forEach(char => {
                    const span = document.createElement('span');
                    span.textContent = char;
                    span.className = 'char-wrapper';
                    const inner = document.createElement('span');
                    inner.textContent = char;
                    inner.className = 'char';
                    span.innerHTML = '';
                    span.appendChild(inner);
                    text.appendChild(span);
                });
            });

            const tl = gsap.timeline();
            tl.fromTo('.char', 
                { y: '110%' },
                {
                    y: '0%',
                    duration: 1,
                    stagger: 0.05,
                    ease: "power4.out",
                    delay: 0.2
                }
            );
        });

        const cursorDot = document.getElementById('cursor-dot');
        const cursorRing = document.getElementById('cursor-ring');
        const magneticElements = document.querySelectorAll('.magnetic');
        
        let mouseX = 0, mouseY = 0;
        let cursorX = 0, cursorY = 0;
        let ringX = 0, ringY = 0;

        document.addEventListener('mousemove', (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;
        });

        gsap.ticker.add(() => {
            if (window.matchMedia("(hover: hover) and (pointer: fine)").matches) {
                cursorX = mouseX;
                cursorY = mouseY;
                ringX = mouseX;
                ringY = mouseY;

                gsap.set(cursorDot, { x: cursorX, y: cursorY });
                gsap.set(cursorRing, { x: ringX, y: ringY });
            }
        });

        document.addEventListener('mouseover', (e) => {
            const target = e.target.closest('.magnetic');
            if (target) {
                if (window.matchMedia("(hover: hover)").matches) {
                    document.body.classList.add('hovering');
                    gsap.to(cursorRing, { scale: 1.5, duration: 0.2 });
                }
            } else {
                 if (window.matchMedia("(hover: hover)").matches) {
                    document.body.classList.remove('hovering');
                    gsap.to(cursorRing, { scale: 1, duration: 0.2 });
                }
            }
        });

        magneticElements.forEach(el => {
             el.addEventListener('mousemove', (e) => {
                if (window.matchMedia("(hover: hover)").matches) {
                    const rect = el.getBoundingClientRect();
                    const x = e.clientX - rect.left - rect.width / 2;
                    const y = e.clientY - rect.top - rect.height / 2;
                    gsap.to(el, { x: x * 0.3, y: y * 0.3, duration: 0.2 });
                }
            });
            el.addEventListener('mouseleave', () => {
                 gsap.to(el, { x: 0, y: 0, duration: 0.5 });
            });
        });

        function handleTilt(e, card) {
            const rect = card.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            const centerX = rect.width / 2;
            const centerY = rect.height / 2;
            
            const rotateX = ((y - centerY) / centerY) * -5;
            const rotateY = ((x - centerX) / centerX) * 5;

            card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale3d(1.02, 1.02, 1.02)`;
        }

        function resetTilt(card) {
            card.style.transform = `perspective(1000px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)`;
        }

        function makeDraggable(element) {
            let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
            const header = element.querySelector('.draggable-handle');
            
            if (header) {
                header.onmousedown = dragMouseDown;
            }

            function dragMouseDown(e) {
                e.preventDefault();
                pos3 = e.clientX;
                pos4 = e.clientY;
                document.onmouseup = closeDragElement;
                document.onmousemove = elementDrag;
            }

            function elementDrag(e) {
                e.preventDefault();
                pos1 = pos3 - e.clientX;
                pos2 = pos4 - e.clientY;
                pos3 = e.clientX;
                pos4 = e.clientY;
                
                element.style.top = (element.offsetTop - pos2) + "px";
                element.style.left = (element.offsetLeft - pos1) + "px";
            }

            function closeDragElement() {
                document.onmouseup = null;
                document.onmousemove = null;
            }
        }

        const draggableWindow = document.getElementById('draggable-window');
        if (draggableWindow) {
            makeDraggable(draggableWindow);
        }

        const scene = new THREE.Scene();

        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
        
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 1));
        document.getElementById('webgl-container').appendChild(renderer.domElement);

        const vertexShader = `
            varying vec2 vUv;
            varying float vElevation;
            uniform float uTime;
            uniform vec2 uMouse;

            vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
            vec2 mod289(vec2 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
            vec3 permute(vec3 x) { return mod289(((x*34.0)+1.0)*x); }
            float snoise(vec2 v) {
                const vec4 C = vec4(0.211324865405187, 0.366025403784439, -0.577350269189626, 0.024390243902439);
                vec2 i  = floor(v + dot(v, C.yy) );
                vec2 x0 = v - i + dot(i, C.xx);
                vec2 i1;
                i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);
                vec4 x12 = x0.xyxy + C.xxzz;
                x12.xy -= i1;
                i = mod289(i);
                vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 )) + i.x + vec3(0.0, i1.x, 1.0 ));
                vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);
                m = m*m ;
                m = m*m ;
                vec3 x = 2.0 * fract(p * C.www) - 1.0;
                vec3 h = abs(x) - 0.5;
                vec3 ox = floor(x + 0.5);
                vec3 a0 = x - ox;
                m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );
                vec3 g;
                g.x  = a0.x  * x0.x  + h.x  * x0.y;
                g.yz = a0.yz * x12.xz + h.yz * x12.yw;
                return 130.0 * dot(m, g);
            }

            void main() {
                vUv = uv;
                vec3 pos = position;
                
                float dist = distance(uv, uMouse * 0.5 + 0.5); 
                float interaction = smoothstep(0.5, 0.0, dist);

                float elevation = snoise(vec2(pos.x * 0.5 + uTime * 0.2, pos.y * 0.5 + uTime * 0.3));
                
                elevation += interaction * 0.5 * sin(uTime * 3.0);

                pos.z += elevation * 1.5;
                vElevation = elevation;

                gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
            }
        `;

        const fragmentShader = `
            varying vec2 vUv;
            varying float vElevation;
            uniform vec3 uColor; 
            
            void main() {
                vec3 colorDark = vec3(0.0, 0.0, 0.1);
                vec3 colorWhite = vec3(0.9, 0.9, 1.0);

                float mixStrength = vElevation * 0.5 + 0.5;
                
                vec3 color = mix(colorDark, uColor, mixStrength);
                
                if (mixStrength > 0.8) {
                    color = mix(color, colorWhite, (mixStrength - 0.8) * 5.0);
                }

                gl_FragColor = vec4(color, 0.9);
            }
        `;

        const planeGeometry = new THREE.PlaneGeometry(30, 30, 24, 24); 
        const planeMaterial = new THREE.ShaderMaterial({
            vertexShader: vertexShader,
            fragmentShader: fragmentShader,
            uniforms: {
                uTime: { value: 0 },
                uMouse: { value: new THREE.Vector2(0, 0) },
                uColor: { value: new THREE.Vector3(state.r, state.g, state.b) } 
            },
            transparent: true,
            wireframe: false 
        });

        const liquidPlane = new THREE.Mesh(planeGeometry, planeMaterial);
        liquidPlane.rotation.x = -Math.PI / 4; 
        scene.add(liquidPlane);

        camera.position.z = 10;
        camera.position.y = 2;

        let targetX = 0;
        let targetY = 0;
        const windowHalfX = window.innerWidth / 2;
        const windowHalfY = window.innerHeight / 2;

        document.addEventListener('mousemove', (event) => {
            const x = (event.clientX / window.innerWidth) * 2 - 1;
            const y = -(event.clientY / window.innerHeight) * 2 + 1;
            
            planeMaterial.uniforms.uMouse.value.set(x, y);

            targetX = (event.clientX - windowHalfX) * 0.001;
            targetY = (event.clientY - windowHalfY) * 0.001;
        });

        const clock = new THREE.Clock();

        function animate() {
            const elapsedTime = clock.getElapsedTime();
            
            planeMaterial.uniforms.uTime.value = elapsedTime;
            
            planeMaterial.uniforms.uColor.value.set(state.r, state.g, state.b);

            liquidPlane.rotation.z = Math.sin(elapsedTime * 0.1) * 0.1;
            
            renderer.render(scene, camera);
            requestAnimationFrame(animate);
        }
        animate();

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        const widgetBtn = document.getElementById('ai-widget-btn');
        const chatWindow = document.getElementById('ai-chat-window');
        const closeChat = document.getElementById('close-chat');
        const aiInput = document.getElementById('ai-input');
        const sendBtn = document.getElementById('send-btn');
        const chatMessages = document.getElementById('chat-messages');

        const context = "You are Joji, a helpful, loyal, and friendly AI dog residing in Aditya Singh's portfolio. You answer questions enthusiastically and can control the website. If the user asks to change the theme, you MUST include the command [THEME:COLOR] in your response, where COLOR is one of: CYAN, PURPLE, GREEN, ORANGE, ROSE. Example: 'Woof! Changing it to green now! [THEME:GREEN]'. If the user has a project idea, tell them to try the new 'AI Architect' feature in the hero section!";

        function toggleChat() {
            chatWindow.classList.toggle('open');
        }

        widgetBtn.addEventListener('click', toggleChat);
        closeChat.addEventListener('click', toggleChat);

        async function fetchWithRetry(url, options, retries = 3, backoff = 1000) {
            try {
                const response = await fetch(url, options);
                if (!response.ok) {
                    if (retries > 0 && (response.status === 429 || response.status >= 500)) {
                        throw new Error(`Server error: ${response.status}`);
                    }
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return await response.json();
            } catch (error) {
                if (retries > 0) {
                    await new Promise(resolve => setTimeout(resolve, backoff));
                    return fetchWithRetry(url, options, retries - 1, backoff * 2);
                } else {
                    throw error;
                }
            }
        }

        async function sendMessage() {
            const text = aiInput.value.trim();
            if (!text) return;

            addMessage(text, 'user');
            aiInput.value = '';

            const loadingId = addMessage('Thinking... üêæ', 'ai');

            try {
                const data = await fetchWithRetry(
                    `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${AIzaSyASpNE0W0_i6ZrS_65TAdm3dUHL_qk2Y-I}`, 
                    {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{
                                role: "user",
                                parts: [{ text: context + "\nUSER QUERY: " + text }]
                            }]
                        })
                    }
                );
                
                let reply = data.candidates[0].content.parts[0].text;
                
                const themeMatch = reply.match(/\[THEME:(\w+)\]/);
                if (themeMatch) {
                    const colorName = themeMatch[1].toLowerCase();
                    const theme = themes[colorName];
                    if (theme) {
                        window.setTheme(theme.hex, theme.rgb);
                    }
                    reply = reply.replace(/\[THEME:\w+\]/, '');
                }
                
                document.getElementById(loadingId).remove();
                addMessage(reply, 'ai');

            } catch (error) {
                document.getElementById(loadingId).remove();
                addMessage("Woof! Something went wrong. I'll try again later.", 'ai');
            }
        }

        function addMessage(text, sender) {
            const div = document.createElement('div');
            const id = Math.random().toString(36).substr(2, 9);
            div.id = id;
            
            if (sender === 'user') {
                div.className = "self-end bg-accent/10 border border-accent/20 p-3 rounded-2xl rounded-tr-none max-w-[85%] text-xs text-white";
                div.innerHTML = text;
            } else {
                div.className = "self-start bg-white/5 border border-white/5 p-3 rounded-2xl rounded-tl-none max-w-[85%] text-xs text-gray-300 leading-relaxed shadow-sm";
                div.innerHTML = text;
            }
            
            chatMessages.appendChild(div);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            return id;
        }

        sendBtn.addEventListener('click', sendMessage);
        aiInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });

        const architectModal = document.getElementById('architect-modal');
        const architectContent = document.getElementById('architect-content');
        
        function toggleArchitect() {
            const isOpen = architectModal.classList.contains('pointer-events-auto');
            if (isOpen) {
                architectModal.classList.remove('opacity-100', 'pointer-events-auto');
                architectModal.classList.add('opacity-0', 'pointer-events-none');
                architectContent.classList.remove('scale-100');
                architectContent.classList.add('scale-95');
            } else {
                architectModal.classList.remove('opacity-0', 'pointer-events-none');
                architectModal.classList.add('opacity-100', 'pointer-events-auto');
                architectContent.classList.remove('scale-95');
                architectContent.classList.add('scale-100');
            }
        }

        async function generateProjectPlan() {
            const idea = document.getElementById('project-idea').value;
            if (!idea.trim()) return;

            const inputSection = document.getElementById('architect-input-section');
            const loadingSection = document.getElementById('architect-loading');
            const resultSection = document.getElementById('architect-result');

            inputSection.classList.add('hidden');
            loadingSection.classList.remove('hidden');

            const prompt = `
                Act as a Senior Software Architect. Analyze this project idea: "${idea}".
                
                Output a JSON object with these keys:
                - name: A cool, modern, one-word or two-word name for this project.
                - stack: An array of 3-4 strings (e.g. "React", "Python", "AWS"). Focus on modern, scalable tech.
                - pitch: A one-sentence elevator pitch.
                - plan: A bulleted list (max 3 items) of the execution plan.
                
                Do not include markdown formatting like \`\`\`json. Just the raw JSON string.
            `;

            try {
                const data = await fetchWithRetry(
                    `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${AIzaSyASpNE0W0_i6ZrS_65TAdm3dUHL_qk2Y-I}`, 
                    {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{
                                role: "user",
                                parts: [{ text: prompt }]
                            }]
                        })
                    }
                );

                const text = data.candidates[0].content.parts[0].text;
                const jsonStr = text.replace(/```json/g, '').replace(/```/g, '').trim();
                const result = JSON.parse(jsonStr);

                currentProjectData = result;

                loadingSection.classList.add('hidden');
                resultSection.classList.remove('hidden');

                resultSection.innerHTML = `
                    <div class="text-center mb-8">
                        <div class="text-accent text-xs font-mono uppercase tracking-widest mb-2">Project Codename</div>
                        <h2 class="text-4xl font-tall font-bold text-white mb-2">${result.name}</h2>
                        <p class="text-gray-400 italic">"${result.pitch}"</p>
                    </div>

                    <div class="grid grid-cols-2 gap-4 mb-6">
                        ${result.stack.map(tech => `
                            <div class="bg-white/5 border border-white/10 p-3 rounded-lg text-center">
                                <span class="text-sm font-bold text-gray-200">${tech}</span>
                            </div>
                        `).join('')}
                    </div>

                    <div class="bg-black/40 border border-white/5 rounded-xl p-6 mb-6">
                        <h4 class="text-xs font-bold text-accent uppercase tracking-widest mb-4 border-b border-white/10 pb-2">Execution Protocol</h4>
                        <ul class="space-y-3">
                            ${result.plan.map(step => `
                                <li class="flex gap-3 text-sm text-gray-300">
                                    <i data-lucide="check-circle" class="w-5 h-5 text-green-500 shrink-0"></i>
                                    ${step}
                                </li>
                            `).join('')}
                        </ul>
                    </div>

                    <div class="border-t border-white/10 pt-6 mt-6">
                        <h4 class="text-xs font-bold text-white uppercase tracking-widest mb-4">Send Proposal to Aditya</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                            <input type="text" id="user-name" class="bg-white/5 border border-white/10 rounded-lg px-4 py-3 text-sm text-white focus:border-accent outline-none" placeholder="Your Name">
                            <input type="email" id="user-email" class="bg-white/5 border border-white/10 rounded-lg px-4 py-3 text-sm text-white focus:border-accent outline-none" placeholder="Your Email">
                        </div>
                        <button onclick="sendProjectProposal()" class="w-full py-3 bg-accent text-black font-bold rounded-lg hover:opacity-90 transition-opacity flex justify-center items-center gap-2">
                            <span>SEND PROPOSAL</span>
                            <i data-lucide="send" class="w-4 h-4"></i>
                        </button>
                    </div>

                    <button onclick="resetArchitect()" class="w-full mt-4 py-2 text-xs text-gray-500 hover:text-white transition-colors">
                        Discard & Start Over
                    </button>
                `;
                lucide.createIcons();

            } catch (error) {
                console.error(error);
                loadingSection.classList.add('hidden');
                inputSection.classList.remove('hidden');
                alert("Analysis failed. Please try again.");
            }
        }

        function sendProjectProposal() {
            if (!currentProjectData) return;
            
            const name = document.getElementById('user-name').value;
            const email = document.getElementById('user-email').value;
            
            if (!name || !email) {
                alert("Please enter your name and email to send the proposal.");
                return;
            }

            const subject = `Project Proposal: ${currentProjectData.name}`;
            const body = `Hi Aditya,%0D%0A%0D%0AI'm ${name} (${email}).%0D%0A%0D%0AI used your AI Architect to generate this project idea:%0D%0A%0D%0A---%0D%0APROJECT: ${currentProjectData.name}%0D%0APITCH: ${currentProjectData.pitch}%0D%0A%0D%0ATECH STACK:%0D%0A- ${currentProjectData.stack.join('%0D%0A- ')}%0D%0A%0D%0APLAN:%0D%0A- ${currentProjectData.plan.join('%0D%0A- ')}%0D%0A---%0D%0A%0D%0ALet's discuss this!`;

            window.location.href = `mailto:www.adisng@gmail.com?subject=${subject}&body=${body}`;
        }

        function resetArchitect() {
            document.getElementById('architect-result').classList.add('hidden');
            document.getElementById('architect-input-section').classList.remove('hidden');
            document.getElementById('project-idea').value = '';
            currentProjectData = null;
        }

        let catRenderer, catScene, catCamera, catAnimationId, catMixer;

        function releaseTheCat() {
            const overlay = document.getElementById('disco-overlay');
            const container = document.getElementById('disco-cat-container');
            
            // Check for file protocol which blocks 3D models
            if (window.location.protocol === 'file:') {
                alert("‚ö†Ô∏è SECURITY BLOCKED: Browsers cannot load 3D models directly from a file.\n\nPlease use a Local Server (like 'Live Server' in VS Code) to view this feature.");
                // Fallback visual so they see something
                container.innerHTML = '<div class="flex items-center justify-center h-full text-white text-center p-4 bg-red-900/50">Needs Local Server<br>(CORS Error)</div>';
                
                overlay.classList.remove('hidden');
                overlay.classList.remove('opacity-0');
                overlay.classList.add('opacity-100');
                overlay.classList.remove('pointer-events-none'); 
                overlay.classList.add('pointer-events-auto');
                
                // Cleanup logic still needed to close overlay
                overlay.onclick = () => {
                    overlay.classList.add('hidden');
                    container.innerHTML = '';
                };
                return;
            }

            if (catRenderer) {
                container.innerHTML = '';
                cancelAnimationFrame(catAnimationId);
            }

            catScene = new THREE.Scene();
            // Adjust camera to frame the cat better
            catCamera = new THREE.PerspectiveCamera(45, 1, 0.1, 1000); 
            catCamera.position.set(0, 20, 80); // Higher and back
            catCamera.lookAt(0, 10, 0); // Look at center

            catRenderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
            catRenderer.setSize(container.clientWidth, container.clientHeight);
            container.appendChild(catRenderer.domElement);

            // Lighting setup
            const ambientLight = new THREE.AmbientLight(0xffffff, 1.2);
            catScene.add(ambientLight);
            
            const dirLight = new THREE.DirectionalLight(0xffffff, 1.0);
            dirLight.position.set(10, 20, 10);
            catScene.add(dirLight);
            
            const backLight = new THREE.DirectionalLight(0x22d3ee, 0.5); // Cyan rim light
            backLight.position.set(-10, 10, -10);
            catScene.add(backLight);

            // Texture Loading
            const textureLoader = new THREE.TextureLoader();
            // Using .png matching the FBX internal reference
            const catTexture = textureLoader.load('cat.png', 
                () => console.log("Texture loaded"), 
                undefined, 
                (err) => console.error("Texture error. Ensure 'cat.png' is in folder.")
            );

            // Model Loading
            const loader = new THREE.FBXLoader();
            // Vital: Tell loader to look in current folder for any internal references
            loader.setResourcePath('./'); 
            
            loader.load('cat.fbx', (object) => {
                console.log("Cat model loaded!");
                
                object.traverse((child) => {
                    if (child.isMesh) {
                        // Apply texture manually to ensure it works
                        child.material.map = catTexture;
                        child.material.needsUpdate = true;
                    }
                });

                if (object.animations && object.animations.length) {
                    catMixer = new THREE.AnimationMixer(object);
                    const action = catMixer.clipAction(object.animations[0]);
                    action.play();
                }

                // Scale and Position Adjustments
                object.scale.set(0.35, 0.35, 0.35); 
                object.position.y = -20; // Lower it to fit in circle
                object.position.x = 0;
                
                catScene.add(object);
            }, (xhr) => {
                console.log((xhr.loaded / xhr.total * 100) + '% loaded');
            }, (error) => {
                console.error("Error loading FBX:", error);
                const errorMsg = document.createElement('div');
                errorMsg.className = "absolute inset-0 flex flex-col items-center justify-center text-white font-mono text-xs text-center p-4 bg-black/50";
                errorMsg.innerHTML = `<span class="text-red-400 font-bold">Error Loading Model</span><br>Check Console (F12)`;
                container.appendChild(errorMsg);
            });

            const animateCat = () => {
                // Use a dedicated clock for the mixer
                if (!window.catClock) window.catClock = new THREE.Clock();
                
                const delta = window.catClock.getDelta();
                if (catMixer) catMixer.update(delta);
                
                // Slight idle rotation if no animation
                if (catScene.children.length > 3) { // lights + model
                   // catScene.children[3].rotation.y += 0.01; 
                }

                catRenderer.render(catScene, catCamera);
                catAnimationId = requestAnimationFrame(animateCat);
            };
            animateCat();

            overlay.classList.remove('hidden');
            overlay.classList.remove('pointer-events-none'); 
            overlay.classList.add('pointer-events-auto');
            
            void overlay.offsetWidth; 
            overlay.classList.remove('opacity-0');
            overlay.classList.add('opacity-100');

            gsap.fromTo(container, 
                { y: -window.innerHeight, scale: 0.5 },
                { y: 0, scale: 1, duration: 1.5, ease: "elastic.out(1, 0.5)" }
            );

            const colors = [
                'rgba(255, 0, 0, 0.4)', 'rgba(255, 165, 0, 0.4)', 'rgba(255, 255, 0, 0.4)',
                'rgba(0, 128, 0, 0.4)', 'rgba(0, 0, 255, 0.4)', 'rgba(128, 0, 128, 0.4)',
                'rgba(255, 192, 203, 0.4)'
            ];
            
            let discoInterval;
            let startTimeout;
            let endTimeout;

            const stopParty = () => {
                if (startTimeout) clearTimeout(startTimeout);
                if (endTimeout) clearTimeout(endTimeout);
                if (discoInterval) clearInterval(discoInterval);
                
                overlay.classList.remove('opacity-100');
                overlay.classList.add('opacity-0');
                
                overlay.classList.remove('pointer-events-auto');
                overlay.classList.add('pointer-events-none');
                
                gsap.killTweensOf(container);

                setTimeout(() => {
                    overlay.classList.add('hidden');
                    overlay.style.backgroundColor = 'transparent';
                    
                    cancelAnimationFrame(catAnimationId);
                    if(catRenderer) {
                        catRenderer.dispose();
                        container.innerHTML = '';
                        catRenderer = null;
                        catScene = null;
                        catMixer = null;
                    }
                    overlay.onclick = null;
                }, 500); 
            };

            overlay.onclick = stopParty;

            startTimeout = setTimeout(() => {
                let colorIndex = 0;
                discoInterval = setInterval(() => {
                    overlay.style.backgroundColor = colors[colorIndex];
                    colorIndex = (colorIndex + 1) % colors.length;
                }, 250); 
            }, 8000);

            endTimeout = setTimeout(stopParty, 11000);
        }

        gsap.registerPlugin(ScrollTrigger);
        gsap.utils.toArray('section').forEach(section => {
            gsap.from(section.children, {
                opacity: 0,
                y: 30,
                duration: 1,
                stagger: 0.15,
                scrollTrigger: {
                    trigger: section,
                    start: "top 80%",
                    toggleActions: "play none none reverse"
                }
            });
        });

    </script>
</body>
</html>
