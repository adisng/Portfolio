<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Aditya Singh | Freelance Full Stack Developer</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- Three.js Core -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://unpkg.com/@studio-freight/lenis@1.0.42/dist/lenis.min.js"></script> 
    <link href="https://fonts.googleapis.com/css2?family=Antonio:wght@100..700&family=Space+Grotesk:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            darkMode: ["class"],
            theme: {
                container: {
                    center: true,
                    padding: "2rem",
                    screens: {
                        "2xl": "1400px",
                    },
                },
                extend: {
                    colors: {
                        border: "hsl(var(--border))",
                        input: "hsl(var(--input))",
                        ring: "hsl(var(--ring))",
                        background: "hsl(var(--background))",
                        foreground: "hsl(var(--foreground))",
                        primary: {
                            DEFAULT: "hsl(var(--primary))",
                            foreground: "hsl(var(--primary-foreground))",
                        },
                        secondary: {
                            DEFAULT: "hsl(var(--secondary))",
                            foreground: "hsl(var(--secondary-foreground))",
                        },
                        destructive: {
                            DEFAULT: "hsl(var(--destructive))",
                            foreground: "hsl(var(--destructive-foreground))",
                        },
                        muted: {
                            DEFAULT: "hsl(var(--muted))",
                            foreground: "hsl(var(--muted-foreground))",
                        },
                        accent: {
                            DEFAULT: "hsl(var(--accent))",
                            foreground: "hsl(var(--accent-foreground))",
                        },
                        popover: {
                            DEFAULT: "hsl(var(--popover))",
                            foreground: "hsl(var(--popover-foreground))",
                        },
                        card: {
                            DEFAULT: "hsl(var(--card))",
                            foreground: "hsl(var(--card-foreground))",
                        },
                    },
                    borderRadius: {
                        lg: "var(--radius)",
                        md: "calc(var(--radius) - 2px)",
                        sm: "calc(var(--radius) - 4px)",
                    },
                    keyframes: {
                        "accordion-down": {
                            from: { height: 0 },
                            to: { height: "var(--radix-accordion-content-height)" },
                        },
                        "accordion-up": {
                            from: { height: "var(--radix-accordion-content-height)" },
                            to: { height: 0 },
                        },
                    },
                    animation: {
                        "accordion-down": "accordion-down 0.2s ease-out",
                        "accordion-up": "accordion-up 0.2s ease-out",
                    },
                    fontFamily: {
                        sans: ['Space Grotesk', 'sans-serif'],
                        display: ['Antonio', 'sans-serif'],
                    }
                },
            },
        }
    </script>

    <style>
        :root {
            /* Shadcn Dark Theme Variables */
            --background: 240 10% 3.9%;   /* #0a0a0b */
            --foreground: 0 0% 98%;       /* #fafafa */
            
            --card: 240 10% 3.9%;
            --card-foreground: 0 0% 98%;
            
            --popover: 240 10% 3.9%;
            --popover-foreground: 0 0% 98%;
            
            --primary: 189 88% 53%;       /* #22d3ee (Cyan) */
            --primary-foreground: 240 5.9% 10%;
            
            --secondary: 240 3.7% 15.9%;
            --secondary-foreground: 0 0% 98%;
            
            --muted: 240 3.7% 15.9%;
            --muted-foreground: 240 5% 64.9%;
            
            --accent: 240 3.7% 15.9%;
            --accent-foreground: 0 0% 98%;
            
            --destructive: 0 62.8% 30.6%;
            --destructive-foreground: 0 0% 98%;
            
            --border: 240 3.7% 15.9%;
            --input: 240 3.7% 15.9%;
            --ring: 240 4.9% 83.9%;
            
            --radius: 0.75rem; /* rounded-xl */

            /* Original Custom Vars */
            --accent-rgb: 34, 211, 238;
        }

        html.lenis { height: auto; }
        .lenis.lenis-smooth { scroll-behavior: auto; }
        .lenis.lenis-smooth [data-lenis-prevent] { overscroll-behavior: contain; }
        .lenis.lenis-stopped { overflow: hidden; }
        .lenis.lenis-scrolling iframe { pointer-events: none; }

        body {
            background: hsl(var(--background));
            color: hsl(var(--foreground));
            font-family: 'Space Grotesk', sans-serif;
            overflow-x: hidden;
            cursor: none;
            -webkit-tap-highlight-color: transparent;
            transition: color 0.5s ease;
        }

        /* Custom Cursor */
        #cursor-dot, #cursor-ring {
            position: fixed;
            top: 0; left: 0;
            transform: translate(-50%, -50%);
            pointer-events: none;
            z-index: 9999;
            border-radius: 50%;
            mix-blend-mode: difference; 
        }
        #cursor-dot {
            width: 8px; height: 8px;
            background: hsl(var(--primary));
            box-shadow: 0 0 15px hsl(var(--primary));
            transition: background 0.3s;
        }
        #cursor-ring {
            width: 50px; height: 50px;
            border: 1px solid rgba(255, 255, 255, 0.8);
            transition: width 0.15s ease-out, height 0.15s ease-out, background-color 0.15s, border-color 0.3s;
            will-change: width, height, transform; 
        }
        body.hovering #cursor-ring {
            width: 80px; height: 80px;
            background-color: rgba(255, 255, 255, 0.1);
            border-color: hsl(var(--primary));
            backdrop-filter: blur(2px);
        }
        body.hovering #cursor-dot { opacity: 0; }
        @media (hover: none) and (pointer: coarse) {
            #cursor-dot, #cursor-ring { display: none !important; }
            body { cursor: auto; }
            .magnetic { cursor: pointer; }
        }

        #webgl-container {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            z-index: -1; opacity: 1; pointer-events: none;
        }

        h1, h2, h3, .font-tall {
            font-family: 'Antonio', sans-serif;
            text-transform: uppercase;
            letter-spacing: 0.02em; 
            line-height: 0.9;
        }

        /* Text Effects */
        .char-wrapper { display: inline-block; overflow: hidden; vertical-align: bottom; padding-bottom: 0.2em; }
        .char { display: inline-block; will-change: transform; }
        .text-outline {
            color: rgba(255, 255, 255, 0.05); 
            -webkit-text-stroke: 1px rgba(255, 255, 255, 0.5); 
            position: relative; display: inline-block;
        }
        .gradient-accent {
            color: hsl(var(--primary));
            text-shadow: 0 0 30px rgba(var(--accent-rgb), 0.5);
            transition: color 0.5s;
        }

        /* Replaced glass-panel with shadcn card utilities mostly, but keeping this for specific tilt cards */
        .glass-panel {
            background: rgba(10, 10, 11, 0.6); /* Zinc-950 alpha */
            backdrop-filter: blur(12px); 
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid hsl(var(--border));
            border-radius: var(--radius);
            transition: transform 0.1s, border-color 0.3s, background 0.3s;
            transform-style: preserve-3d;
            perspective: 1000px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
        }
        .glass-panel:hover {
            border-color: hsl(var(--primary) / 0.5);
            box-shadow: 0 0 40px rgba(var(--accent-rgb), 0.1);
            background: rgba(10, 10, 11, 0.9);
        }

        /* Draggable Window */
        .draggable-window { user-select: none; cursor: default; position: absolute; }
        .draggable-handle { cursor: grab; }
        .draggable-handle:active { cursor: grabbing; }

        /* AI Widget */
        #ai-widget-btn {
            position: fixed; bottom: 2rem; right: 2rem;
            width: 3.5rem; height: 3.5rem;
            border-radius: 9999px;
            background: hsl(var(--background));
            border: 1px solid hsl(var(--border));
            color: hsl(var(--primary));
            z-index: 90;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; transition: all 0.3s ease;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
        }
        #ai-widget-btn:hover {
            transform: scale(1.1);
            border-color: hsl(var(--primary));
            box-shadow: 0 0 30px rgba(var(--accent-rgb), 0.3);
            background: hsl(var(--muted));
        }

        /* Chat Window */
        #ai-chat-window {
            position: fixed; bottom: 7rem; right: 5vw;
            width: 90vw; max-width: 400px; height: 0;
            opacity: 0; overflow: hidden;
            background: hsl(var(--card));
            border: 1px solid hsl(var(--border));
            backdrop-filter: blur(10px);
            border-radius: var(--radius);
            z-index: 90;
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            pointer-events: none;
        }
        @media (min-width: 768px) { #ai-chat-window { right: 2rem; width: 400px; } }
        #ai-chat-window.open { height: 600px; max-height: 75vh; opacity: 1; pointer-events: all; }

        /* Marquee */
        .marquee-container {
            position: relative; width: 100%; overflow: hidden;
            background: hsl(var(--secondary) / 0.3);
            border-top: 1px solid hsl(var(--border));
            border-bottom: 1px solid hsl(var(--border));
            padding: 1.5rem 0; margin-top: 4rem;
        }
        .marquee-content { display: flex; animation: scrolling 20s linear infinite; will-change: transform; }
        .marquee-item {
            font-family: 'Antonio', sans-serif;
            font-size: 2rem; font-weight: 500;
            color: hsl(var(--muted-foreground));
            white-space: nowrap; padding: 0 2rem;
            transition: color 0.3s;
        }
        @media (min-width: 768px) { .marquee-item { font-size: 3rem; padding: 0 3rem; } }
        .marquee-container:hover .marquee-item {
            color: hsl(var(--primary));
            text-shadow: 0 0 10px hsl(var(--primary));
            opacity: 1;
        }
        @keyframes scrolling { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }

        /* Nav */
        .nav-link {
            position: relative; font-size: 0.9rem; letter-spacing: 0.1em;
            text-transform: uppercase; color: hsl(var(--muted-foreground));
            transition: color 0.3s;
        }
        .nav-link::after {
            content: ''; position: absolute; bottom: -4px; left: 0;
            width: 0; height: 2px;
            background: hsl(var(--primary));
            transition: width 0.3s ease;
        }
        .nav-link:hover { color: hsl(var(--foreground)); }
        .nav-link:hover::after { width: 100%; }

        #mobile-menu { transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1); }
        
        .grain-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 1; opacity: 0.05;
            background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyBAMAAADsEZWCAAAAGFBMVEUAAAA5OTkAAABMTExERERmZmYzMzMyMjJ4F4O1AAAACHRSTlMAMwA5MzMzM3PF3C0AAABcSURBVDjLY2AYBaNgOANGPBh4QDz4wQc+8IEDfOADHzjABz7wgQ984AMf+MAHPvCBD3zgAx/4wAc+8IEPAG6sH/Hl/nZ1AAAAAElFTkSuQmCC");
            background-size: 100px;
        }
        .vignette {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 2; 
            background: radial-gradient(circle at center, transparent 0%, hsl(var(--background)) 130%);
        }
    </style>
</head>
<body class="selection:bg-primary/30 selection:text-primary-foreground">

    <div class="grain-overlay"></div>
    <div class="vignette"></div>

    <div id="cursor-dot"></div>
    <div id="cursor-ring"></div>

    <div id="webgl-container"></div>

    <!-- Mobile Menu -->
    <div id="mobile-menu" class="fixed inset-0 bg-background/95 backdrop-blur-xl z-50 transform translate-x-full flex flex-col justify-center items-center gap-8 text-center">
        <div class="absolute top-6 right-6 p-2 rounded-md hover:bg-muted transition-colors" onclick="toggleMobileMenu()">
            <i data-lucide="x" class="w-8 h-8 text-foreground cursor-pointer"></i>
        </div>
        <a href="#about" class="text-5xl font-display text-muted-foreground hover:text-primary transition-colors" onclick="toggleMobileMenu()">About</a>
        <a href="#experience" class="text-5xl font-display text-muted-foreground hover:text-primary transition-colors" onclick="toggleMobileMenu()">Experience</a>
        <a href="#services" class="text-5xl font-display text-muted-foreground hover:text-primary transition-colors" onclick="toggleMobileMenu()">Services</a>
        
        <div class="flex gap-6 mt-4">
            <button onclick="cycleTheme()" class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 w-10" title="Switch Theme">
                <i data-lucide="sparkles" class="w-5 h-5"></i>
            </button>
            
            <button onclick="toggleMobileMenu(); toggleArchitect()" class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 w-10" title="AI Architect">
                <i data-lucide="cpu" class="w-5 h-5"></i>
            </button>
        </div>

        <div class="w-24 h-[1px] bg-border my-4"></div>
        <a href="mailto:www.adisng@gmail.com" class="text-base font-mono text-primary hover:text-foreground transition-colors">www.adisng@gmail.com</a>
    </div>

    <!-- Header -->
    <header class="fixed top-0 w-full z-40 px-6 py-4 transition-all duration-300 bg-gradient-to-b from-background via-background/80 to-transparent">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <a href="#" class="magnetic z-50 group">
                <div class="font-bold text-2xl tracking-widest relative flex items-center gap-1 font-display text-foreground">
                    ADITYA<span class="text-primary animate-pulse">.</span>
                </div>
            </a>

            <nav class="hidden md:flex gap-12 items-center">
                <a href="#about" class="magnetic nav-link">About</a>
                <a href="#experience" class="magnetic nav-link">Experience</a>
                <a href="#services" class="magnetic nav-link">Services</a>
                
                <div class="h-6 w-px bg-border mx-2"></div>
                
                <button onclick="cycleTheme()" class="magnetic relative w-10 h-10 flex items-center justify-center rounded-md hover:bg-muted transition-colors group overflow-hidden" title="Change Theme">
                    <i data-lucide="sparkles" class="w-4 h-4 text-muted-foreground group-hover:text-primary transition-colors transform group-hover:rotate-12 duration-500"></i>
                </button>
            </nav>

            <div class="flex items-center gap-4">
                <a href="mailto:www.adisng@gmail.com" class="magnetic hidden md:block">
                    <!-- Shadcn Button: Outline Variant -->
                    <div class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-xs tracking-widest uppercase font-bold ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-6 py-2">
                        HIRE ME
                    </div>
                </a>
                <button class="md:hidden text-foreground p-2" onclick="toggleMobileMenu()">
                    <i data-lucide="menu" class="w-6 h-6"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- About Section -->
    <section id="about" class="relative min-h-screen flex items-center justify-center px-6 pt-0 overflow-hidden">
        <div class="relative z-20 max-w-7xl mx-auto w-full grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
            <div class="order-2 lg:order-1 relative">
                <!-- Badge -->
                <div class="mb-8 inline-flex items-center gap-3 px-3 py-1 rounded-full border border-border bg-card/50 text-card-foreground shadow-sm backdrop-blur-sm">
                    <span class="relative flex h-2 w-2 flex-shrink-0">
                      <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-primary opacity-75"></span>
                      <span class="relative inline-flex rounded-full h-2 w-2 bg-primary"></span>
                    </span>
                    <span class="text-[10px] md:text-xs font-mono tracking-widest uppercase text-muted-foreground font-semibold">
                        Status: Available for Freelance Projects
                    </span>
                </div>
                
                <h1 class="text-7xl sm:text-8xl md:text-[10rem] font-bold leading-none mb-10 text-foreground cursor-default font-display relative z-20 flex flex-col justify-center">
                    <div class="overflow-hidden pb-2">
                        <span class="text-outline block reveal-text" style="line-height: 0.9;">ADITYA</span>
                    </div>
                    <div class="overflow-hidden flex items-center gap-4 pb-2">
                        <span class="gradient-accent block reveal-text" style="line-height: 0.9;">SINGH</span>
                        <span class="text-2xl md:text-5xl text-primary font-mono opacity-60 font-normal">&lt;/&gt;</span>
                    </div>
                </h1>
                
                <div class="relative max-w-lg mb-12">
                    <p class="text-muted-foreground text-lg md:text-xl leading-relaxed font-light border-l-2 border-primary pl-6">
                        I build <span class="text-primary font-medium">high-performance</span> web applications and cloud infrastructure that help <span class="text-foreground font-medium">ambitious startups</span> scale. Fast, secure, and user-centric.
                    </p>
                </div>

                <div class="flex flex-wrap gap-6 items-center">
                    <!-- Shadcn Button: Primary -->
                    <a href="#services" class="magnetic inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-11 px-8">
                        VIEW SERVICES
                    </a>
                    
                    <!-- Shadcn Button: Secondary/Outline -->
                    <button onclick="toggleArchitect()" class="magnetic inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-11 px-8 gap-2 group">
                        <i data-lucide="cpu" class="w-4 h-4 text-primary group-hover:animate-spin"></i>
                        BUILD YOUR IDEA
                    </button>

                    <div class="flex gap-4">
                        <a href="https://github.com/adisng" target="_blank" class="magnetic inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 w-10">
                            <i data-lucide="github" class="w-5 h-5"></i>
                        </a>
                        <a href="https://linkedin.com/in/patialapapi03" target="_blank" class="magnetic inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 w-10">
                            <i data-lucide="linkedin" class="w-5 h-5"></i>
                        </a>
                    </div>
                </div>

            </div>
            
            <div class="order-1 lg:order-2 h-[300px] lg:h-full w-full relative flex items-center justify-center pointer-events-none">
                <!-- Code Window styled as Shadcn Card -->
                <div id="draggable-window" class="pointer-events-auto z-30 w-80 rounded-xl border border-border bg-card text-card-foreground shadow-xl flex flex-col group interactive draggable-window hidden md:flex" style="top: 20%; right: 10%;">
                    <div class="flex justify-between items-center p-4 border-b border-border bg-muted/30 draggable-handle" title="Drag me!">
                        <div class="flex gap-1.5">
                            <div class="w-3 h-3 rounded-full bg-destructive"></div>
                            <div class="w-3 h-3 rounded-full bg-yellow-500/80"></div>
                            <div class="w-3 h-3 rounded-full bg-green-500/80"></div>
                        </div>
                        <div class="font-mono text-xs text-muted-foreground flex items-center gap-1">
                            <i data-lucide="terminal" class="w-3 h-3"></i>
                            main.py
                        </div>
                    </div>
                    
                    <div class="flex-1 p-6 font-mono text-xs md:text-sm text-muted-foreground overflow-y-auto bg-card/50">
                        <p><span class="text-primary">class</span> <span class="text-foreground">Developer</span>:</p>
                        <p class="pl-4">name = <span class="text-green-400">'Aditya Singh'</span></p>
                        <p class="pl-4">role = <span class="text-green-400">'Full Stack Engineer'</span></p>
                        <p class="pl-4">stack = [<span class="text-green-400">'AWS'</span>, <span class="text-green-400">'Python'</span>, <span class="text-green-400">'React'</span>]</p>
                        <br>
                        <p class="pl-4"><span class="text-primary">def</span> <span class="text-yellow-400">deploy</span>(self):</p>
                        <p class="pl-8">return <span class="text-green-400">'Scalable Solutions'</span></p>
                        <p class="mt-2 animate-pulse text-primary">_</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Marquee -->
    <div class="marquee-container">
        <div class="marquee-content">
            <span class="marquee-item">PYTHON</span>
            <span class="marquee-item text-primary">‚Ä¢</span>
            <span class="marquee-item">REACT.JS</span>
            <span class="marquee-item text-primary">‚Ä¢</span>
            <span class="marquee-item">AWS CLOUD</span>
            <span class="marquee-item text-primary">‚Ä¢</span>
            <span class="marquee-item">MACHINE LEARNING</span>
            <span class="marquee-item text-primary">‚Ä¢</span>
            <span class="marquee-item">BIG DATA</span>
            <span class="marquee-item text-primary">‚Ä¢</span>
            <span class="marquee-item">PYTHON</span>
            <span class="marquee-item text-primary">‚Ä¢</span>
            <span class="marquee-item">REACT.JS</span>
            <span class="marquee-item text-primary">‚Ä¢</span>
            <span class="marquee-item">AWS CLOUD</span>
            <span class="marquee-item text-primary">‚Ä¢</span>
            <span class="marquee-item">MACHINE LEARNING</span>
            <span class="marquee-item text-primary">‚Ä¢</span>
            <span class="marquee-item">BIG DATA</span>
            <span class="marquee-item text-primary">‚Ä¢</span>
        </div>
    </div>

    <!-- Experience Section -->
    <section id="experience" class="py-24 md:py-40 px-6 relative">
        <div class="max-w-5xl mx-auto">
            <div class="flex items-end justify-between mb-16 md:mb-24">
                <h2 class="text-5xl md:text-8xl font-display font-bold text-foreground tracking-tight">Experience</h2>
                <div class="h-[1px] flex-1 bg-border ml-8 mb-4"></div>
            </div>

            <!-- Shadcn Card Style -->
            <div class="rounded-xl border border-border bg-card text-card-foreground shadow-sm p-8 md:p-12 group relative overflow-hidden magnetic-card transition-colors hover:border-primary/50" onmousemove="handleTilt(event, this)" onmouseleave="resetTilt(this)">
                <div class="absolute top-0 right-0 w-96 h-96 bg-primary/5 rounded-full blur-[100px] group-hover:bg-primary/10 transition-all duration-700"></div>
                
                <div class="relative z-10 flex flex-col md:flex-row gap-10 justify-between items-start">
                    <div class="flex-1">
                        <div class="flex flex-wrap items-center gap-4 mb-4">
                            <h3 class="text-3xl md:text-4xl font-display font-bold text-foreground">Frontend Engineer</h3>
                            <!-- Badge -->
                            <span class="inline-flex items-center rounded-full border border-transparent bg-secondary px-2.5 py-0.5 text-xs font-semibold text-secondary-foreground shadow transition-colors hover:bg-secondary/80 uppercase tracking-widest">High-Growth SaaS</span>
                        </div>
                        <p class="text-muted-foreground font-mono text-sm mb-8 flex items-center gap-2">
                            <i data-lucide="calendar" class="w-4 h-4"></i> Jan 2025 - Apr 2025
                        </p>
                        <p class="text-foreground leading-relaxed text-base md:text-lg">
                            Built the core frontend architecture using modern stacks. Reduced load times by <span class="text-primary font-bold border-b border-primary">40%</span> and improved SEO scores, directly increasing user retention and session duration for the client platform.
                        </p>
                    </div>
                    <div class="flex flex-row md:flex-col gap-3 justify-start">
                        <!-- Badges Outline -->
                        <span class="inline-flex items-center rounded-md border border-input bg-background px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none text-muted-foreground">React.js</span>
                        <span class="inline-flex items-center rounded-md border border-input bg-background px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none text-muted-foreground">Optimization</span>
                        <span class="inline-flex items-center rounded-md border border-input bg-background px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none text-muted-foreground">Performance</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Services Section (Formerly Certifications) -->
    <section id="services" class="py-24 md:py-40 px-6 relative">
        <div class="max-w-6xl mx-auto">
            <div class="flex items-end justify-between mb-16 md:mb-24">
                <h2 class="text-5xl md:text-8xl font-display font-bold text-foreground tracking-tight">Services</h2>
                <div class="h-[1px] flex-1 bg-border ml-8 mb-4"></div>
            </div>
            
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-8">
                <!-- Service Card 1 -->
                <div class="glass-panel p-8 hover:border-primary/50 transition-all group" onmousemove="handleTilt(event, this)" onmouseleave="resetTilt(this)">
                    <div class="flex justify-between items-start mb-6">
                        <div class="p-3 bg-secondary rounded-lg border border-border group-hover:border-primary group-hover:bg-primary/10 transition-colors">
                            <i data-lucide="cloud" class="w-8 h-8 text-foreground group-hover:text-primary group-hover:scale-110 transition-all"></i>
                        </div>
                        <span class="text-[10px] uppercase tracking-widest text-muted-foreground border border-border bg-muted px-2 py-1 rounded">Scale</span>
                    </div>
                    <h3 class="text-2xl md:text-3xl font-display font-bold mb-3 group-hover:text-primary transition-colors text-foreground">Cloud Infrastructure</h3>
                    <p class="text-muted-foreground text-sm leading-relaxed">I design secure, auto-scaling cloud infrastructure on AWS so your app never crashes under traffic spikes.</p>
                </div>

                <!-- Service Card 2 -->
                <div class="glass-panel p-8 hover:border-primary/50 transition-all group" onmousemove="handleTilt(event, this)" onmouseleave="resetTilt(this)">
                    <div class="flex justify-between items-start mb-6">
                        <div class="p-3 bg-secondary rounded-lg border border-border group-hover:border-primary group-hover:bg-primary/10 transition-colors">
                            <i data-lucide="database" class="w-8 h-8 text-foreground group-hover:text-primary group-hover:scale-110 transition-all"></i>
                        </div>
                        <span class="text-[10px] uppercase tracking-widest text-muted-foreground border border-border bg-muted px-2 py-1 rounded">Insights</span>
                    </div>
                    <h3 class="text-2xl md:text-3xl font-display font-bold mb-3 group-hover:text-primary transition-colors text-foreground">Data Engineering</h3>
                    <p class="text-muted-foreground text-sm leading-relaxed">I build robust pipelines to process your business data, giving you real-time actionable insights without the mess.</p>
                </div>

                <!-- Service Card 3 -->
                <div class="glass-panel p-8 hover:border-primary/50 transition-all group" onmousemove="handleTilt(event, this)" onmouseleave="resetTilt(this)">
                    <div class="flex justify-between items-start mb-6">
                        <div class="p-3 bg-secondary rounded-lg border border-border group-hover:border-primary group-hover:bg-primary/10 transition-colors">
                            <i data-lucide="brain" class="w-8 h-8 text-foreground group-hover:text-primary group-hover:scale-110 transition-all"></i>
                        </div>
                        <span class="text-[10px] uppercase tracking-widest text-muted-foreground border border-border bg-muted px-2 py-1 rounded">Automation</span>
                    </div>
                    <h3 class="text-2xl md:text-3xl font-display font-bold mb-3 group-hover:text-primary transition-colors text-foreground">AI Integration</h3>
                    <p class="text-muted-foreground text-sm leading-relaxed">I integrate AI models into your product to automate complex workflows and provide smarter user experiences.</p>
                </div>

                <!-- Service Card 4 -->
                <div class="glass-panel p-8 hover:border-primary/50 transition-all group" onmousemove="handleTilt(event, this)" onmouseleave="resetTilt(this)">
                    <div class="flex justify-between items-start mb-6">
                        <div class="p-3 bg-secondary rounded-lg border border-border group-hover:border-primary group-hover:bg-primary/10 transition-colors">
                            <i data-lucide="code" class="w-8 h-8 text-foreground group-hover:text-primary group-hover:scale-110 transition-all"></i>
                        </div>
                        <span class="text-[10px] uppercase tracking-widest text-muted-foreground border border-border bg-muted px-2 py-1 rounded">Build</span>
                    </div>
                    <h3 class="text-2xl md:text-3xl font-display font-bold mb-3 group-hover:text-primary transition-colors text-foreground">Full Stack Development</h3>
                    <p class="text-muted-foreground text-sm leading-relaxed">I build robust, end-to-end web applications from scratch using React, Python, and modern best practices.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Education Section -->
    <section id="education" class="py-24 md:py-40 px-6 relative">
        <div class="max-w-5xl mx-auto">
            <div class="flex items-end justify-between mb-16 md:mb-24">
                <h2 class="text-5xl md:text-8xl font-display font-bold text-foreground tracking-tight">Education</h2>
                <div class="h-[1px] flex-1 bg-border ml-8 mb-4"></div>
            </div>

            <div class="grid grid-cols-1 gap-8">
                <div class="glass-panel p-8 md:p-12 group relative overflow-hidden magnetic-card hover:border-primary/50" onmousemove="handleTilt(event, this)" onmouseleave="resetTilt(this)">
                    <div class="absolute top-0 right-0 w-96 h-96 bg-primary/5 rounded-full blur-[100px] group-hover:bg-primary/10 transition-all duration-700"></div>
                    
                    <div class="relative z-10 flex flex-col md:flex-row gap-8 justify-between items-center">
                        <div class="flex-1">
                            <h3 class="text-2xl md:text-3xl font-display font-bold text-foreground mb-2">Master of Computer Applications (MCA)</h3>
                            <p class="text-primary font-mono text-sm mb-4">MATS University, Raipur</p>
                            <p class="text-muted-foreground leading-relaxed max-w-xl">
                                Specializing in Computer Science and Advanced Computing.
                            </p>
                        </div>
                        <div class="px-4 py-2 border border-border rounded-full bg-secondary text-xs font-mono text-secondary-foreground whitespace-nowrap">
                            2025 - 2027
                        </div>
                    </div>
                </div>

                <div class="glass-panel p-8 md:p-12 group relative overflow-hidden magnetic-card hover:border-primary/50" onmousemove="handleTilt(event, this)" onmouseleave="resetTilt(this)">
                    <div class="absolute top-0 right-0 w-96 h-96 bg-primary/5 rounded-full blur-[100px] group-hover:bg-primary/10 transition-all duration-700"></div>
                    
                    <div class="relative z-10 flex flex-col md:flex-row gap-8 justify-between items-center">
                        <div class="flex-1">
                            <h3 class="text-2xl md:text-3xl font-display font-bold text-foreground mb-2">Bachelors in Computer Applications (BCA)</h3>
                            <p class="text-primary font-mono text-sm mb-4">St. Vincent Pallotti, Raipur</p>
                            <p class="text-muted-foreground leading-relaxed max-w-xl">
                                Foundation in Computer Programming & Applications.
                            </p>
                        </div>
                        <div class="px-4 py-2 border border-border rounded-full bg-secondary text-xs font-mono text-secondary-foreground whitespace-nowrap">
                            Aug 2022 - Aug 2025
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="py-24 md:py-40 px-6 border-t border-border relative overflow-hidden bg-background">
        <div class="max-w-7xl mx-auto text-center relative z-10">
            <h2 class="text-5xl md:text-[10rem] font-display font-bold mb-16 text-muted hover:text-foreground transition-colors cursor-default leading-none whitespace-nowrap">
                ADITYA SINGH
            </h2>
            
            <div class="flex flex-wrap justify-center gap-8 mb-16">
                <a href="mailto:www.adisng@gmail.com" class="magnetic text-sm uppercase tracking-widest text-muted-foreground hover:text-primary transition-colors flex items-center gap-2">
                    <i data-lucide="mail" class="w-4 h-4"></i> Start a Project
                </a>
                <a href="https://linkedin.com/in/patialapapi03" target="_blank" class="magnetic text-sm uppercase tracking-widest text-muted-foreground hover:text-primary transition-colors flex items-center gap-2">
                    <i data-lucide="linkedin" class="w-4 h-4"></i> LinkedIn
                </a>
                <a href="https://github.com/adisng" target="_blank" class="magnetic text-sm uppercase tracking-widest text-muted-foreground hover:text-primary transition-colors flex items-center gap-2">
                    <i data-lucide="github" class="w-4 h-4"></i> GitHub
                </a>
            </div>
            
            <div class="text-[10px] font-mono text-muted-foreground flex justify-between items-center border-t border-border pt-8">
                <span>¬© 2025 ALL RIGHTS RESERVED</span>
                <span>RAIPUR, INDIA</span>
            </div>
        </div>
    </footer>

    <!-- AI Widget Button -->
    <div id="ai-widget-btn" class="magnetic" title="Chat with Joji">
        <i data-lucide="dog" class="w-6 h-6"></i>
        <div class="absolute inset-0 rounded-full border border-primary/50 animate-ping"></div>
    </div>

    <!-- Chat Window (Styled as Shadcn Popover/Card) -->
    <div id="ai-chat-window">
        <div class="p-4 border-b border-border flex justify-between items-center bg-muted/50">
            <div class="text-sm font-medium text-foreground flex items-center gap-2">
                <i data-lucide="dog" class="w-4 h-4 text-primary"></i>
                JOJI (AI DOG)
            </div>
            <button id="close-chat" class="rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2">
                <i data-lucide="x" class="w-4 h-4"></i>
            </button>
        </div>
        
        <div class="h-[400px] overflow-y-auto p-4 flex flex-col gap-4" id="chat-messages">
            <div class="self-start bg-secondary p-3 rounded-lg rounded-tl-none text-sm text-secondary-foreground shadow-sm border border-border">
                <p>
                    Woof! I'm Joji, Aditya's digital dog üêï. I can help you navigate this site or even change the colors for you. Just ask me to "switch to cyan"!
                </p>
            </div>
        </div>

        <div class="p-4 border-t border-border bg-card">
            <div class="relative flex items-center">
                <input type="text" id="ai-input" class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 pr-10" placeholder="Type here..." autocomplete="off">
                <button id="send-btn" class="absolute right-3 p-1 text-muted-foreground hover:text-primary transition-colors">
                    <i data-lucide="send" class="w-4 h-4"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Architect Modal (Styled as Shadcn Dialog) -->
    <div id="architect-modal" class="fixed inset-0 z-[100] flex items-center justify-center bg-background/80 backdrop-blur-sm opacity-0 pointer-events-none transition-all duration-300 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0">
        <div class="w-full max-w-lg border border-border bg-card p-6 shadow-lg duration-200 sm:rounded-lg opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95 transition-all" id="architect-content">
            
            <div class="flex flex-col space-y-1.5 text-center sm:text-left mb-6">
                <div class="flex justify-between items-start">
                    <div>
                        <h3 class="text-lg font-semibold leading-none tracking-tight text-foreground">Project Architect</h3>
                        <p class="text-sm text-muted-foreground mt-1.5">Powered by Gemini 2.5</p>
                    </div>
                    <button onclick="toggleArchitect()" class="rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2">
                        <i data-lucide="x" class="w-4 h-4"></i>
                        <span class="sr-only">Close</span>
                    </button>
                </div>
            </div>

            <div class="max-h-[60vh] overflow-y-auto">
                <div id="architect-input-section" class="space-y-4">
                    <p class="text-sm text-muted-foreground">
                        Have an idea? Describe it below. I'll analyze it and generate a <span class="text-primary font-bold">Tech Stack</span>, <span class="text-primary font-bold">Project Name</span>, and <span class="text-primary font-bold">Execution Plan</span> tailored to modern standards.
                    </p>
                    <textarea id="project-idea" rows="4" class="flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 resize-none" placeholder="e.g. A real-time dashboard for tracking satellite debris using WebGL..."></textarea>
                    
                    <button onclick="generateProjectPlan()" id="generate-btn" class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2 w-full gap-2">
                        <span>INITIATE ANALYSIS</span>
                        <i data-lucide="zap" class="w-4 h-4 fill-current"></i>
                    </button>
                </div>

                <div id="architect-loading" class="hidden py-12 flex flex-col items-center justify-center space-y-4">
                    <div class="w-8 h-8 border-4 border-muted border-t-primary rounded-full animate-spin"></div>
                    <p class="text-sm text-muted-foreground animate-pulse">Computing optimum architecture...</p>
                </div>

                <div id="architect-result" class="hidden space-y-6">
                    <!-- Results injected here by JS -->
                </div>
            </div>
        </div>
    </div>

    <script>
        const apiKey = ""; 

        lucide.createIcons();

        // Color State
        const state = { r: 0.13, g: 0.82, b: 0.93 };

        // Shadcn/Tailwind Theme Mapping
        const themes = {
            'cyan':   { hex: '#22d3ee', primary: '189 88% 53%' },      
            'purple': { hex: '#c084fc', primary: '270 95% 75%' },   
            'green':  { hex: '#4ade80', primary: '142 71% 58%' },     
            'orange': { hex: '#fb923c', primary: '24 94% 61%' },    
            'rose':   { hex: '#fb7185', primary: '344 93% 71%' }      
        };
        
        let currentThemeIndex = 0;
        const themeKeys = Object.keys(themes);

        let currentProjectData = null;

        window.setTheme = function(hex, primaryHsl) {
            const root = document.documentElement;
            // Update Shadcn variable
            root.style.setProperty('--primary', primaryHsl);
            
            // Update old CSS vars for compatibility
            const r = parseInt(hex.slice(1, 3), 16);
            const g = parseInt(hex.slice(3, 5), 16);
            const b = parseInt(hex.slice(5, 7), 16);
            root.style.setProperty('--accent-rgb', `${r}, ${g}, ${b}`);

            // WebGL transition
            gsap.to(state, {
                r: r / 255, g: g / 255, b: b / 255,
                duration: 1,
                ease: "power2.out"
            });
        }
        
        function cycleTheme() {
            currentThemeIndex = (currentThemeIndex + 1) % themeKeys.length;
            const key = themeKeys[currentThemeIndex];
            const theme = themes[key];
            window.setTheme(theme.hex, theme.primary);
            
            // Rotate all sparkles icons
            const btns = document.querySelectorAll('button[onclick="cycleTheme()"] i');
            btns.forEach(btn => {
                gsap.fromTo(btn, {rotate: 0}, {rotate: 360, duration: 0.5});
            });
        }

        // --- LENIS SCROLL ---
        const lenis = new Lenis({
            duration: 1.2,
            easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),
            direction: 'vertical',
            gestureDirection: 'vertical',
            smooth: true,
            mouseMultiplier: 1,
            smoothTouch: false,
            touchMultiplier: 2,
        });

        function raf(time) {
            lenis.raf(time);
            requestAnimationFrame(raf);
        }
        requestAnimationFrame(raf);

        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('translate-x-full');
        }

        // --- TEXT ANIMATIONS ---
        document.addEventListener('DOMContentLoaded', () => {
            const revealTexts = document.querySelectorAll('.reveal-text');
            
            revealTexts.forEach(text => {
                const chars = text.textContent.split('');
                text.innerHTML = '';
                
                chars.forEach(char => {
                    const span = document.createElement('span');
                    span.textContent = char;
                    span.className = 'char-wrapper';
                    const inner = document.createElement('span');
                    inner.textContent = char;
                    inner.className = 'char';
                    span.innerHTML = '';
                    span.appendChild(inner);
                    text.appendChild(span);
                });
            });

            const tl = gsap.timeline();
            tl.fromTo('.char', 
                { y: '110%' },
                {
                    y: '0%',
                    duration: 1,
                    stagger: 0.05,
                    ease: "power4.out",
                    delay: 0.2
                }
            );
        });

        // --- CUSTOM CURSOR ---
        const cursorDot = document.getElementById('cursor-dot');
        const cursorRing = document.getElementById('cursor-ring');
        const magneticElements = document.querySelectorAll('.magnetic');
        
        let mouseX = 0, mouseY = 0;
        let cursorX = 0, cursorY = 0;
        let ringX = 0, ringY = 0;

        document.addEventListener('mousemove', (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;
        });

        gsap.ticker.add(() => {
            if (window.matchMedia("(hover: hover) and (pointer: fine)").matches) {
                cursorX = mouseX;
                cursorY = mouseY;
                ringX = mouseX;
                ringY = mouseY;

                gsap.set(cursorDot, { x: cursorX, y: cursorY });
                gsap.set(cursorRing, { x: ringX, y: ringY });
            }
        });

        document.addEventListener('mouseover', (e) => {
            const target = e.target.closest('.magnetic');
            if (target) {
                if (window.matchMedia("(hover: hover)").matches) {
                    document.body.classList.add('hovering');
                    gsap.to(cursorRing, { scale: 1.5, duration: 0.2 });
                }
            } else {
                 if (window.matchMedia("(hover: hover)").matches) {
                    document.body.classList.remove('hovering');
                    gsap.to(cursorRing, { scale: 1, duration: 0.2 });
                }
            }
        });

        magneticElements.forEach(el => {
             el.addEventListener('mousemove', (e) => {
                if (window.matchMedia("(hover: hover)").matches) {
                    const rect = el.getBoundingClientRect();
                    const x = e.clientX - rect.left - rect.width / 2;
                    const y = e.clientY - rect.top - rect.height / 2;
                    gsap.to(el, { x: x * 0.3, y: y * 0.3, duration: 0.2 });
                }
            });
            el.addEventListener('mouseleave', () => {
                 gsap.to(el, { x: 0, y: 0, duration: 0.5 });
            });
        });

        // --- 3D TILT EFFECT ---
        function handleTilt(e, card) {
            const rect = card.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            const centerX = rect.width / 2;
            const centerY = rect.height / 2;
            
            const rotateX = ((y - centerY) / centerY) * -5;
            const rotateY = ((x - centerX) / centerX) * 5;

            card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale3d(1.02, 1.02, 1.02)`;
        }

        function resetTilt(card) {
            card.style.transform = `perspective(1000px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)`;
        }

        // --- DRAGGABLE WINDOW ---
        function makeDraggable(element) {
            let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
            const header = element.querySelector('.draggable-handle');
            
            if (header) {
                header.onmousedown = dragMouseDown;
            }

            function dragMouseDown(e) {
                e.preventDefault();
                pos3 = e.clientX;
                pos4 = e.clientY;
                document.onmouseup = closeDragElement;
                document.onmousemove = elementDrag;
            }

            function elementDrag(e) {
                e.preventDefault();
                pos1 = pos3 - e.clientX;
                pos2 = pos4 - e.clientY;
                pos3 = e.clientX;
                pos4 = e.clientY;
                
                element.style.top = (element.offsetTop - pos2) + "px";
                element.style.left = (element.offsetLeft - pos1) + "px";
            }

            function closeDragElement() {
                document.onmouseup = null;
                document.onmousemove = null;
            }
        }

        const draggableWindow = document.getElementById('draggable-window');
        if (draggableWindow) {
            makeDraggable(draggableWindow);
        }

        // --- WEBGL BACKGROUND ---
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
        
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 1));
        document.getElementById('webgl-container').appendChild(renderer.domElement);

        const vertexShader = `
            varying vec2 vUv;
            varying float vElevation;
            uniform float uTime;
            uniform vec2 uMouse;

            vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
            vec2 mod289(vec2 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
            vec3 permute(vec3 x) { return mod289(((x*34.0)+1.0)*x); }
            float snoise(vec2 v) {
                const vec4 C = vec4(0.211324865405187, 0.366025403784439, -0.577350269189626, 0.024390243902439);
                vec2 i  = floor(v + dot(v, C.yy) );
                vec2 x0 = v - i + dot(i, C.xx);
                vec2 i1;
                i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);
                vec4 x12 = x0.xyxy + C.xxzz;
                x12.xy -= i1;
                i = mod289(i);
                vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 )) + i.x + vec3(0.0, i1.x, 1.0 ));
                vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);
                m = m*m ;
                m = m*m ;
                vec3 x = 2.0 * fract(p * C.www) - 1.0;
                vec3 h = abs(x) - 0.5;
                vec3 ox = floor(x + 0.5);
                vec3 a0 = x - ox;
                m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );
                vec3 g;
                g.x  = a0.x  * x0.x  + h.x  * x0.y;
                g.yz = a0.yz * x12.xz + h.yz * x12.yw;
                return 130.0 * dot(m, g);
            }

            void main() {
                vUv = uv;
                vec3 pos = position;
                
                float dist = distance(uv, uMouse * 0.5 + 0.5); 
                float interaction = smoothstep(0.5, 0.0, dist);

                float elevation = snoise(vec2(pos.x * 0.5 + uTime * 0.2, pos.y * 0.5 + uTime * 0.3));
                
                elevation += interaction * 0.5 * sin(uTime * 3.0);

                pos.z += elevation * 1.5;
                vElevation = elevation;

                gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
            }
        `;

        const fragmentShader = `
            varying vec2 vUv;
            varying float vElevation;
            uniform vec3 uColor; 
            
            void main() {
                vec3 colorDark = vec3(0.0, 0.0, 0.1);
                vec3 colorWhite = vec3(0.9, 0.9, 1.0);

                float mixStrength = vElevation * 0.5 + 0.5;
                
                vec3 color = mix(colorDark, uColor, mixStrength);
                
                if (mixStrength > 0.8) {
                    color = mix(color, colorWhite, (mixStrength - 0.8) * 5.0);
                }

                gl_FragColor = vec4(color, 0.9);
            }
        `;

        const planeGeometry = new THREE.PlaneGeometry(30, 30, 24, 24); 
        const planeMaterial = new THREE.ShaderMaterial({
            vertexShader: vertexShader,
            fragmentShader: fragmentShader,
            uniforms: {
                uTime: { value: 0 },
                uMouse: { value: new THREE.Vector2(0, 0) },
                uColor: { value: new THREE.Vector3(state.r, state.g, state.b) } 
            },
            transparent: true,
            wireframe: false 
        });

        const liquidPlane = new THREE.Mesh(planeGeometry, planeMaterial);
        liquidPlane.rotation.x = -Math.PI / 4; 
        scene.add(liquidPlane);

        camera.position.z = 10;
        camera.position.y = 2;

        let targetX = 0;
        let targetY = 0;
        const windowHalfX = window.innerWidth / 2;
        const windowHalfY = window.innerHeight / 2;

        document.addEventListener('mousemove', (event) => {
            const x = (event.clientX / window.innerWidth) * 2 - 1;
            const y = -(event.clientY / window.innerHeight) * 2 + 1;
            
            planeMaterial.uniforms.uMouse.value.set(x, y);

            targetX = (event.clientX - windowHalfX) * 0.001;
            targetY = (event.clientY - windowHalfY) * 0.001;
        });

        const clock = new THREE.Clock();

        function animate() {
            const elapsedTime = clock.getElapsedTime();
            
            planeMaterial.uniforms.uTime.value = elapsedTime;
            
            planeMaterial.uniforms.uColor.value.set(state.r, state.g, state.b);

            liquidPlane.rotation.z = Math.sin(elapsedTime * 0.1) * 0.1;
            
            renderer.render(scene, camera);
            requestAnimationFrame(animate);
        }
        animate();

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        // --- CHAT & ARCHITECT ---
        const widgetBtn = document.getElementById('ai-widget-btn');
        const chatWindow = document.getElementById('ai-chat-window');
        const closeChat = document.getElementById('close-chat');
        const aiInput = document.getElementById('ai-input');
        const sendBtn = document.getElementById('send-btn');
        const chatMessages = document.getElementById('chat-messages');

        const context = "You are Joji, a helpful, loyal, and friendly AI dog residing in Aditya Singh's portfolio. You answer questions enthusiastically and can control the website. If the user asks to change the theme, you MUST include the command [THEME:COLOR] in your response, where COLOR is one of: CYAN, PURPLE, GREEN, ORANGE, ROSE. Example: 'Woof! Changing it to green now! [THEME:GREEN]'. If the user has a project idea, tell them to try the new 'AI Architect' feature in the hero section!";

        function toggleChat() {
            chatWindow.classList.toggle('open');
        }

        widgetBtn.addEventListener('click', toggleChat);
        closeChat.addEventListener('click', toggleChat);

        async function fetchWithRetry(url, options, retries = 3, backoff = 1000) {
            try {
                const response = await fetch(url, options);
                if (!response.ok) {
                    if (retries > 0 && (response.status === 429 || response.status >= 500)) {
                        throw new Error(`Server error: ${response.status}`);
                    }
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return await response.json();
            } catch (error) {
                if (retries > 0) {
                    await new Promise(resolve => setTimeout(resolve, backoff));
                    return fetchWithRetry(url, options, retries - 1, backoff * 2);
                } else {
                    throw error;
                }
            }
        }

        async function sendMessage() {
            const text = aiInput.value.trim();
            if (!text) return;

            addMessage(text, 'user');
            aiInput.value = '';

            const loadingId = addMessage('Thinking... üêæ', 'ai');

            try {
                const data = await fetchWithRetry(
                    `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, 
                    {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{
                                role: "user",
                                parts: [{ text: context + "\nUSER QUERY: " + text }]
                            }]
                        })
                    }
                );
                
                let reply = data.candidates[0].content.parts[0].text;
                
                const themeMatch = reply.match(/\[THEME:(\w+)\]/);
                if (themeMatch) {
                    const colorName = themeMatch[1].toLowerCase();
                    const theme = themes[colorName];
                    if (theme) {
                        window.setTheme(theme.hex, theme.primary);
                    }
                    reply = reply.replace(/\[THEME:\w+\]/, '');
                }
                
                document.getElementById(loadingId).remove();
                addMessage(reply, 'ai');

            } catch (error) {
                document.getElementById(loadingId).remove();
                addMessage("Woof! Something went wrong. I'll try again later.", 'ai');
            }
        }

        function addMessage(text, sender) {
            const div = document.createElement('div');
            const id = Math.random().toString(36).substr(2, 9);
            div.id = id;
            
            if (sender === 'user') {
                div.className = "self-end bg-primary/20 border border-primary/30 p-3 rounded-lg rounded-tr-none max-w-[85%] text-sm text-foreground";
                div.innerHTML = text;
            } else {
                div.className = "self-start bg-secondary p-3 rounded-lg rounded-tl-none max-w-[85%] text-sm text-muted-foreground leading-relaxed shadow-sm border border-border";
                div.innerHTML = text;
            }
            
            chatMessages.appendChild(div);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            return id;
        }

        sendBtn.addEventListener('click', sendMessage);
        aiInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });

        const architectModal = document.getElementById('architect-modal');
        const architectContent = document.getElementById('architect-content');
        
        function toggleArchitect() {
            const isOpen = architectModal.classList.contains('pointer-events-auto');
            if (isOpen) {
                architectModal.classList.remove('opacity-100', 'pointer-events-auto');
                architectModal.classList.add('opacity-0', 'pointer-events-none');
                architectModal.setAttribute('data-state', 'closed');
                
                architectContent.classList.remove('scale-100', 'translate-y-0', 'opacity-100');
                architectContent.classList.add('scale-95', 'translate-y-4', 'opacity-0');
            } else {
                architectModal.classList.remove('opacity-0', 'pointer-events-none');
                architectModal.classList.add('opacity-100', 'pointer-events-auto');
                architectModal.setAttribute('data-state', 'open');

                architectContent.classList.remove('scale-95', 'translate-y-4', 'opacity-0');
                architectContent.classList.add('scale-100', 'translate-y-0', 'opacity-100');
            }
        }

        async function generateProjectPlan() {
            const idea = document.getElementById('project-idea').value;
            if (!idea.trim()) return;

            const inputSection = document.getElementById('architect-input-section');
            const loadingSection = document.getElementById('architect-loading');
            const resultSection = document.getElementById('architect-result');

            inputSection.classList.add('hidden');
            loadingSection.classList.remove('hidden');

            const prompt = `
                Act as a Senior Software Architect. Analyze this project idea: "${idea}".
                
                Output a JSON object with these keys:
                - name: A cool, modern, one-word or two-word name for this project.
                - stack: An array of 3-4 strings (e.g. "React", "Python", "AWS"). Focus on modern, scalable tech.
                - pitch: A one-sentence elevator pitch.
                - plan: A bulleted list (max 3 items) of the execution plan.
                
                Do not include markdown formatting like \`\`\`json. Just the raw JSON string.
            `;

            try {
                const data = await fetchWithRetry(
                    `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, 
                    {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{
                                role: "user",
                                parts: [{ text: prompt }]
                            }]
                        })
                    }
                );

                const text = data.candidates[0].content.parts[0].text;
                const jsonStr = text.replace(/```json/g, '').replace(/```/g, '').trim();
                const result = JSON.parse(jsonStr);

                currentProjectData = result;

                loadingSection.classList.add('hidden');
                resultSection.classList.remove('hidden');

                resultSection.innerHTML = `
                    <div class="text-center mb-6">
                        <div class="text-primary text-xs font-mono uppercase tracking-widest mb-2">Project Codename</div>
                        <h2 class="text-3xl font-display font-bold text-foreground mb-2">${result.name}</h2>
                        <p class="text-muted-foreground italic text-sm">"${result.pitch}"</p>
                    </div>

                    <div class="grid grid-cols-2 gap-3 mb-6">
                        ${result.stack.map(tech => `
                            <div class="bg-secondary border border-border p-2 rounded-md text-center">
                                <span class="text-sm font-bold text-secondary-foreground">${tech}</span>
                            </div>
                        `).join('')}
                    </div>

                    <div class="bg-muted/50 border border-border rounded-lg p-4 mb-6">
                        <h4 class="text-xs font-bold text-primary uppercase tracking-widest mb-3 border-b border-border pb-2">Execution Protocol</h4>
                        <ul class="space-y-2">
                            ${result.plan.map(step => `
                                <li class="flex gap-3 text-sm text-muted-foreground">
                                    <i data-lucide="check-circle" class="w-4 h-4 text-green-500 shrink-0"></i>
                                    ${step}
                                </li>
                            `).join('')}
                        </ul>
                    </div>

                    <div class="pt-2">
                        <h4 class="text-xs font-bold text-foreground uppercase tracking-widest mb-3">Send Proposal to Aditya</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-3">
                            <input type="text" id="user-name" class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50" placeholder="Your Name">
                            <input type="email" id="user-email" class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50" placeholder="Your Email">
                        </div>
                        <button onclick="sendProjectProposal()" class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2 w-full gap-2">
                            <span>SEND PROPOSAL</span>
                            <i data-lucide="send" class="w-4 h-4"></i>
                        </button>
                    </div>

                    <button onclick="resetArchitect()" class="w-full mt-2 py-2 text-xs text-muted-foreground hover:text-foreground transition-colors">
                        Discard & Start Over
                    </button>
                `;
                lucide.createIcons();

            } catch (error) {
                console.error(error);
                loadingSection.classList.add('hidden');
                inputSection.classList.remove('hidden');
                alert("Analysis failed. Please try again.");
            }
        }

        function sendProjectProposal() {
            if (!currentProjectData) return;
            
            const name = document.getElementById('user-name').value;
            const email = document.getElementById('user-email').value;
            
            if (!name || !email) {
                alert("Please enter your name and email to send the proposal.");
                return;
            }

            const subject = `Project Proposal: ${currentProjectData.name}`;
            const body = `Hi Aditya,%0D%0A%0D%0AI'm ${name} (${email}).%0D%0A%0D%0AI used your AI Architect to generate this project idea:%0D%0A%0D%0A---%0D%0APROJECT: ${currentProjectData.name}%0D%0APITCH: ${currentProjectData.pitch}%0D%0A%0D%0ATECH STACK:%0D%0A- ${currentProjectData.stack.join('%0D%0A- ')}%0D%0A%0D%0APLAN:%0D%0A- ${currentProjectData.plan.join('%0D%0A- ')}%0D%0A---%0D%0A%0D%0ALet's discuss this!`;

            window.location.href = `mailto:www.adisng@gmail.com?subject=${subject}&body=${body}`;
        }

        function resetArchitect() {
            document.getElementById('architect-result').classList.add('hidden');
            document.getElementById('architect-input-section').classList.remove('hidden');
            document.getElementById('project-idea').value = '';
            currentProjectData = null;
        }

        gsap.registerPlugin(ScrollTrigger);
        gsap.utils.toArray('section').forEach(section => {
            gsap.from(section.children, {
                opacity: 0,
                y: 30,
                duration: 1,
                stagger: 0.15,
                scrollTrigger: {
                    trigger: section,
                    start: "top 80%",
                    toggleActions: "play none none reverse"
                }
            });
        });

    </script>
</body>
</html>
